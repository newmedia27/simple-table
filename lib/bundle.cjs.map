{"version":3,"file":"bundle.cjs","sources":["../src/lib/utils/iconLIbrary.js","../src/lib/components/modal/Modal.js","../src/lib/components/modal/context.js","../src/lib/components/modal/index.js","../src/lib/components/resizeble/Resizeble.js","../src/lib/components/cell/Cell.js","../src/lib/constants.js","../src/lib/components/toolbar/tooltip/index.js","../src/lib/components/toolbar/button/index.js","../src/lib/components/toolbar/icon/index.js","../src/lib/components/toolbar/dropdown/DropdownWrapper.js","../src/lib/components/toolbar/dropdown/index.js","../src/lib/components/toolbar/dropdownBtn/index.js","../src/lib/components/toolbar/richEditorDropdown/index.js","../src/lib/modalTable/modal-toolbar/content/Content.js","../src/lib/modalTable/modal-toolbar/Toolbar.js","../src/lib/modalTable/ModalTable.js","../src/App.js","../src/plugin/utils.js","../src/lib/Table.js","../src/lib/renderConfig.js","../src/lib/RenderTable.js","../src/plugin/TablePlugin.js","../src/lib/components/toolbar/tableGrid/index.js","../src/lib/components/Button.js","../src/index.js"],"sourcesContent":["import {\n  faAlignCenter,\n  faAlignJustify,\n  faAlignLeft,\n  faAlignRight,\n  faArrowDown,\n  faArrowLeft,\n  faArrowRight,\n  faArrowUp,\n  faBackward,\n  faBars,\n  faBan,\n  faBold,\n  faCheck,\n  faCheckSquare,\n  faChevronDown,\n  faChevronRight,\n  faChevronLeft,\n  faChevronUp,\n  faCloudUploadAlt,\n  faCircle,\n  faCode,\n  faCog,\n  faCompressAlt,\n  faDollarSign,\n  faDownload,\n  faExclamationCircle,\n  faExclamationTriangle,\n  faExpandAlt,\n  faEye,\n  faEyeSlash,\n  faFilter,\n  faFlag,\n  faFont,\n  faForward,\n  faImage,\n  faIndent,\n  faItalic,\n  faLink,\n  faListOl,\n  faListUl,\n  faLock,\n  faLongArrowAltRight,\n  faMapMarkerAlt,\n  faOutdent,\n  faPaintBrush,\n  faParagraph,\n  faPencilAlt,\n  faPrint,\n  faQuestion,\n  faQuoteRight,\n  faSearch,\n  faSearchPlus,\n  faSearchMinus,\n  faSortUp,\n  faSortDown,\n  faSquare,\n  faStepBackward,\n  faStepForward,\n  faStrikethrough,\n  faSyncAlt,\n  faTable,\n  faTint,\n  faTrashAlt,\n  faUnderline,\n  faUser,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\n\nfunction iconLibrary() {\n  library.add(\n    faAlignCenter,\n    faAlignJustify,\n    faAlignLeft,\n    faAlignRight,\n    faArrowDown,\n    faArrowLeft,\n    faArrowRight,\n    faArrowUp,\n    faBackward,\n    faBars,\n    faBan,\n    faBold,\n    faCheck,\n    faCheckSquare,\n    faChevronDown,\n    faChevronRight,\n    faChevronLeft,\n    faChevronUp,\n    faCloudUploadAlt,\n    faCircle,\n    faCode,\n    faCog,\n    faCompressAlt,\n    faDollarSign,\n    faDownload,\n    faExclamationCircle,\n    faExclamationTriangle,\n    faExpandAlt,\n    faEye,\n    faEyeSlash,\n    faFilter,\n    faFlag,\n    faFont,\n    faForward,\n    faImage,\n    faIndent,\n    faItalic,\n    faLink,\n    faListOl,\n    faListUl,\n    faLock,\n    faLongArrowAltRight,\n    faMapMarkerAlt,\n    faOutdent,\n    faPaintBrush,\n    faParagraph,\n    faPencilAlt,\n    faPrint,\n    faQuestion,\n    faQuoteRight,\n    faSearch,\n    faSearchPlus,\n    faSearchMinus,\n    faSortUp,\n    faSortDown,\n    faSquare,\n    faStepBackward,\n    faStepForward,\n    faStrikethrough,\n    faSyncAlt,\n    faTable,\n    faTint,\n    faTrashAlt,\n    faUnderline,\n    faUser  \n  )\n}\n\nexport default iconLibrary;\n","import React, { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport ClassNames from \"classnames\";\nimport styles from \"./modal.module.sass\";\nimport { useModal } from \".\";\n\nlet modalRoot;\nif (typeof document === \"object\") {\n  modalRoot = document.createElement(\"div\");\n  modalRoot.setAttribute(\"class\", styles.modalRoot);\n  document.body.appendChild(modalRoot);\n}\n\nconst ModalContent = ({ children, closingAnimate, className }) => {\n  const { isOpen, close, disabled } = useModal();\n  useEffect(() => {\n    const handleKeyUp = (e) => {\n      if (e.which === 27) {\n        e.preventDefault();\n        close();\n      }\n    };\n\n    window.addEventListener(\"keyup\", handleKeyUp, false);\n    return () => {\n      window.removeEventListener(\"keyup\", handleKeyUp, false);\n    };\n  }, [close]);\n\n  //   useEffect(() => {\n  //     const { body } = document;\n  //     if (isOpen) {\n  //       body.style.overflow = \"hidden\";\n  //     } else {\n  //       body.style.overflow = \"unset\";\n  //     }\n  //   }, [isOpen]);\n\n  if (!isOpen) return null;\n  return createPortal(\n    <div className={styles.root}>\n      <div\n        className={ClassNames(styles.modal__overlay, {\n          [styles.modal__overlay_closed]: closingAnimate,\n        })}\n        onClick={() => close()}\n      />\n      <div\n        className={ClassNames(\n          styles.modal__wrapper,\n          {\n            [styles.modal__wrapper_closed]: closingAnimate,\n          },\n          className\n        )}\n      >\n        <div className={styles.modal}>{children(close, disabled)}</div>\n      </div>\n    </div>,\n    modalRoot\n  );\n};\n\nModalContent.proptypes = {\n  children: PropTypes.node.isRequired,\n  closingAnimate: PropTypes.bool,\n};\nModalContent.defaultprops = {\n  closingAnimate: false,\n};\n\nexport default ModalContent;\n","import { createContext, useContext } from \"react\";\n\nexport const ModalContext = createContext({\n  isOpen: false,\n  disabled: false,\n  close: () => {},\n});\n\nexport const ModalHook = () => useContext(ModalContext);\n","import React, { useState, useCallback, useMemo } from 'react';\nimport ModalContent from './Modal';\nimport { ModalContext, ModalHook } from './context';\n\nconst Modal = ({ isOpen, children, onClose, submit, className }) => {\n    const [closingAnimate, setClosingAnimate] = useState(false);\n\n    const close = useCallback(() => {\n        setClosingAnimate(true);\n        setTimeout(() => {\n            setClosingAnimate(false);\n            if (onClose) {\n                onClose();\n            }\n        }, 600); // must less  than the transition time in css 0.5s\n    }, [onClose, setClosingAnimate]);\n\n    const value = useMemo(\n        () => ({\n            close,\n            isOpen,\n        }),\n        [ close, isOpen]\n    );\n\n    return (\n        <ModalContext.Provider value={value}>\n            <ModalContent closingAnimate={closingAnimate} submit={submit} className={className}>\n                {children}\n            </ModalContent>\n        </ModalContext.Provider>\n    );\n};\n\nexport const useModal = () => ModalHook();\n\nexport default Modal;\n","import React, { useEffect, useRef, useState } from \"react\"\nimport \"./resizeble.sass\"\n\nconst Resizeble = ({ colStyle, setColStyle, colWidth, colKey }) => {\n\tconst [start, setStart] = useState(null)\n\tconst ref = useRef(null)\n\n\tconst handleMouseDown = (e) => {\n\t\tinitDrag(e)\n\t}\n\n\tfunction doDrag(e) {\n\t\tconst width = start.startWidth + e.clientX - start.startX \n\t\tsetColStyle((s) => ({\n\t\t\t...s,\n\t\t\t[colKey]: { ...s[colKey], width },\n\t\t}))\n\t}\n\n\tfunction stopDrag(e) {\n\t\tdocument.documentElement.removeEventListener(\"mousemove\", doDrag, false)\n\t\tdocument.documentElement.removeEventListener(\"mouseup\", stopDrag, false)\n\t}\n\tfunction initDrag(e) {\n\t\tconst startX = e.clientX\n\t\tsetStart({\n\t\t\tstartX,\n\t\t\tstartWidth: colWidth,\n\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\tif (start) {\n\t\t\tdocument.documentElement.addEventListener(\"mousemove\", doDrag, false)\n\t\t\tdocument.documentElement.addEventListener(\"mouseup\", stopDrag, false)\n\t\t}\n\t}, [start])\n\tconsole.log(colKey,'WIDTH')\n\treturn (\n\t\t<>\n\t\t\t<div className=\"border border_top\" />\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tonMouseDown={handleMouseDown}\n\t\t\t\tclassName=\"border border_right\"\n\t\t\t/>\n\t\t\t<div className=\"border border_left\" />\n\t\t\t<div className=\"border border_bottom\" />\n\t\t</>\n\t)\n}\n\nexport default Resizeble\n\n// var p = document.querySelector('p'); // element to make resizable\n\n// p.addEventListener('click', function init() {\n//     p.removeEventListener('click', init, false);\n//     p.className = p.className + ' resizable';\n//     var resizer = document.createElement('div');\n//     resizer.className = 'resizer';\n//     p.appendChild(resizer);\n//     resizer.addEventListener('mousedown', initDrag, false);\n// }, false);\n\n// var startX, startY, startWidth, startHeight;\n\n// function initDrag(e) {\n//    startX = e.clientX;\n//    startY = e.clientY;\n//    startWidth = parseInt(document.defaultView.getComputedStyle(p).width, 10);\n//    startHeight = parseInt(document.defaultView.getComputedStyle(p).height, 10);\n//    document.documentElement.addEventListener('mousemove', doDrag, false);\n//    document.documentElement.addEventListener('mouseup', stopDrag, false);\n// }\n\n// function doDrag(e) {\n//    p.style.width = (startWidth + e.clientX - startX) + 'px';\n//    p.style.height = (startHeight + e.clientY - startY) + 'px';\n// }\n\n// function stopDrag(e) {\n//     document.documentElement.removeEventListener('mousemove', doDrag, false);\n//     document.documentElement.removeEventListener('mouseup', stopDrag, false);\n// }\n","import React, { useRef, useEffect, useCallback, useMemo } from \"react\"\nimport Editor from \"@draft-js-plugins/editor\"\nimport { RichUtils } from \"draft-js\"\nimport { getSelectionInlineStyle } from \"draftjs-utils\"\nimport \"draft-js/dist/Draft.css\"\nimport classNames from \"classnames\"\nimport Resizeble from \"../resizeble/Resizeble\"\nimport \"./Cell.sass\"\n\nexport default function Cell({\n\teditorState,\n\tcellKey,\n\tonChange,\n\tindex,\n\tactive,\n\tsetActive,\n\tstyleKey,\n\theaderKey,\n\tselectGroup,\n\tclicking,\n\tenterHandler,\n\taligment,\n\tsetSelectGroup,\n\tcellStyle,\n\tsetColStyle,\n\tcolKey,\n}) {\n\tconst ref = useRef(null)\n\tconst { eventState, event } = styleKey\n\tconst activeGroup = useMemo(\n\t\t() => selectGroup?.includes(cellKey),\n\t\t[selectGroup]\n\t)\n\tconst changeStyles = useCallback(\n\t\t(state) => {\n\t\t\tconst styles = getSelectionInlineStyle(state)\n\t\t\tconst appliedStyles = Object.keys(styles).filter((e) => styles[e])\n\t\t\tconst difference = appliedStyles\n\t\t\t\t.filter((x) => !eventState.includes(x))\n\t\t\t\t.concat(eventState.filter((x) => !appliedStyles.includes(x)))\n\t\t\tlet addStyleState = state\n\t\t\tif (difference.length) {\n\t\t\t\tdifference.forEach((e) => {\n\t\t\t\t\taddStyleState = RichUtils.toggleInlineStyle(state, e)\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn addStyleState\n\t\t},\n\t\t[eventState]\n\t)\n\n\tconst handleChange = (state) => {\n\t\tconst addStyleState = changeStyles(state)\n\t\tonChange((s) => ({\n\t\t\t...s,\n\t\t\t[cellKey]: { ...s[cellKey], editorState: addStyleState },\n\t\t}))\n\t}\n\tuseEffect(() => {\n\t\tif (eventState && event) {\n\t\t\tconst addStyleState = changeStyles(editorState)\n\t\t\tonChange((s) => ({\n\t\t\t\t...s,\n\t\t\t\t[cellKey]: {\n\t\t\t\t\t...s[cellKey],\n\t\t\t\t\teditorState: addStyleState,\n\t\t\t\t},\n\t\t\t}))\n\t\t}\n\t}, [eventState])\n\n\tuseEffect(() => {\n\t\tif (active === cellKey) {\n\t\t\tconst state = RichUtils.toggleBlockType(editorState, headerKey[cellKey])\n\t\t\tonChange((s) => ({\n\t\t\t\t...s,\n\t\t\t\t[cellKey]: {\n\t\t\t\t\t...s[cellKey],\n\t\t\t\t\teditorState: state,\n\t\t\t\t},\n\t\t\t}))\n\t\t}\n\t}, [headerKey])\n\n\tif (!editorState) {\n\t\treturn null\n\t}\n\n\tconst handleFocus = () => {\n\t\tref.current.editor.focus()\n\t\tsetActive(cellKey)\n\t\tif (!activeGroup) {\n\t\t\tsetSelectGroup([])\n\t\t}\n\t}\n\n\tconst handleBlur = (e) => {\n\t\tif (active === cellKey) {\n\t\t\tsetActive(\"\")\n\t\t}\n\t}\n\n\tconst handleMouseMove = (e) => {\n\t\tif (clicking) {\n\t\t\tenterHandler(e)\n\t\t}\n\t}\n\n\treturn (\n\t\t<td\n\t\t\tclassName={classNames(\"content\", {\n\t\t\t\tactive: activeGroup,\n\t\t\t})}\n\t\t\tonFocus={handleFocus}\n\t\t\tonBlur={handleBlur}\n\t\t\ttabIndex={index}\n\t\t\tdata-key={cellKey}\n\t\t\tonMouseEnter={handleMouseMove}\n\t\t\tstyle={{ textAlign: aligment, ...cellStyle }}\n\t\t>\n\t\t\t<Resizeble\n\t\t\t\tsetColStyle={setColStyle}\n\t\t\t\tcolWidth={cellStyle && cellStyle.width}\n\t\t\t\tcolKey={colKey}\n\t\t\t/>\n\t\t\t<div className=\"content\">\n\t\t\t\t<Editor ref={ref} editorState={editorState} onChange={handleChange} />\n\t\t\t</div>\n\t\t</td>\n\t)\n}\n","export const MAX_INDENT_DEPTH = 20;\nexport const MAX_LIST_DEPTH = 4;\nexport const COLORS = [\n  '#000000',\n  '#FFFFFF',\n  '#888888',\n  '#AAAAAA',\n  '#EEEEEE',\n  '#880000',\n  '#CC0000',\n  '#FF0000',\n  '#FFCCCC',\n  '#FF8800',\n  '#FFCC00',\n  '#FFFF00',\n  '#CCFF00',\n  '#88FF00',\n  '#008800',\n  '#00CC00',\n  '#00CC88',\n  '#00CCCC',\n  '#CCEEFF',\n  '#00CCFF',\n  '#0088FF',\n  '#0000FF',\n  '#8800FF',\n  '#CC00CC',\n  '#CC0088',\n];\nexport const FONTS = [\n  'Arial',\n  'Arial Black',\n  'Comic Sans MS',\n  'Courier New',\n  'Helvetica Neue',\n  'Helvetica',\n  'Impact',\n  'Lucida Grande',\n  'Tahoma',\n  'Times New Roman',\n  'Verdana',\n];\nexport const FONT_SIZES = [8, 9, 10, 11, 12, 14, 18, 24, 36];\n\nexport const defaultPreTagStyling = [\n  ['padding', '9.5px'],\n  ['margin', '0 0 10px'],\n  ['border', '1px solid rgb(204, 204, 204)'],\n  ['background', 'rgb(245, 245, 245)'],\n];\n\nexport const availableAlignments = [\n  { type: 'left', display: { icon: 'align-left-sld' } },\n  { type: 'center', display: { icon: 'align-center-sld' } },\n  { type: 'right', display: { icon: 'align-right-sld' } },\n  { type: 'justify', display: { icon: 'align-justify-sld' } },\n];\n\nexport const dropdownOptions = {\n  alignment: {\n    activeOption: (alignment = 'left') => availableAlignments.find(a => a.type === alignment),\n    controlWidth: 40,\n    dropdownWidth: 40,\n    list: availableAlignments,\n    method: 'listDropdown',\n  },\n}\n\nexport const Keys = {\n  B: 66,\n  Backspace: 8,\n  Delete: 127,\n  E: 69,\n  Enter: 13,\n  I: 73,\n  J: 74,\n  L: 76,\n  R: 82,\n  T: 84,\n  Tab: 9,\n  U: 85,\n  '[': 219,\n  ']': 221,\n};\n\n\nexport const inlineStylesTypes = [\n  'BOLD',\n  'ITALIC',\n  'UNDERLINE'\n]\n\nexport const BLOCK_TYPES = [\n\t{ label: \" “ ” \", style: \"blockquote\" },\n\t{ label: \"UL\", style: \"unordered-list-item\" },\n\t{ label: \"OL\", style: \"ordered-list-item\" },\n\t{ label: \"{ }\", style: \"code-block\" }\n];\n\nexport const HEADER_TYPES = [\n\t// { label: \"(None)\", style: \"unstyled\" },\n\t{ label: \"H1\", style: \"header-one\" },\n\t{ label: \"H2\", style: \"header-two\" },\n\t// { label: \"H3\", style: \"header-three\" },\n\t// { label: \"H4\", style: \"header-four\" },\n\t// { label: \"H5\", style: \"header-five\" },\n\t// { label: \"H6\", style: \"header-six\" }\n];","import React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './tooltip.sass';\n\nconst Tooltip = props => {\n  // ref to the tooltip\n  const ref = useRef(null);\n  // ref to the element the tooltip points to\n  const anchorRef = useRef(null);\n  // if the anchor is resized, update the tooltip positioning\n  const observerRef = useRef(null);\n  useEffect(() => {\n    observerRef.current = \n    new ResizeObserver(() => {\n      const { x, y } = mouseRef.current;\n      const newAnchorRect = anchorRef.current.getBoundingClientRect();\n      const isMouseOverAnchor = () => {\n        if (\n          newAnchorRect.left <= x &&\n          newAnchorRect.right >= x &&\n          newAnchorRect.top <= y &&\n          newAnchorRect.bottom >= y\n        ) {\n          return true;\n        }\n        return false;\n      };\n      if (isMouseOverAnchor()) {\n        shouldOpen.current = true;\n      } else {\n        shouldOpen.current = false;\n        setShow(false);\n      }\n      setAnchorBox(newAnchorRect);\n    })\n  }, []);\n\n  // ref to a container element the tooltip should not overflow to the left or right (for top and bottom positions only)\n  const containerRef = useRef(null);\n  // the amount by which a centered (top or bottom) tooltip would overflow outside the container.\n  // Negative values overflow on the left, positive values overflow on the right.\n  const [overflow, setOverflow] = useState(0);\n\n  const mouseRef = useRef({});\n  const shouldOpen = useRef(false);\n  const [show, setShow] = useState(false);\n  const [anchorBox, setAnchorBox] = useState({ x: 0, y: 0 });\n\n  // use a ref for this prop so it doesn't have to be included in other useEffect dependency arrays\n  const propsAnchorRef = useRef(props.anchor);\n  useEffect(() => {\n    propsAnchorRef.current = props.anchor;\n  }, [props.anchor]);\n\n  // set or find the anchor element for the tooltip\n  // defaults to the nearest positioned ancestor\n  useEffect(() => {\n    if (propsAnchorRef.current?.getBoundingClientRect) {\n      anchorRef.current = propsAnchorRef;\n    } else {\n      anchorRef.current =\n        document.querySelector(propsAnchorRef.current) ?? ref.current?.offsetParent ?? ref.current?.parentNode;\n    }\n\n    const observer = observerRef.current;\n    if (anchorRef.current) {\n      observer.observe(anchorRef.current);\n    }\n\n    const showFn = () => {\n      shouldOpen.current = true;\n      setAnchorBox(anchorRef.current.getBoundingClientRect());\n    };\n\n    const handleMouseMove = e => {\n      mouseRef.current = { x: e.clientX, y: e.clientY };\n      if (!anchorRef.current?.contains(e.target) || ref.current?.contains(e.target)) {\n        shouldOpen.current = false;\n        setShow(false);\n      }\n    };\n\n    const handleWheel = e => {\n      if (anchorRef.current?.contains(e.target)) {\n        setAnchorBox(anchorRef.current?.getBoundingClientRect());\n      } else {\n        shouldOpen.current = false;\n        setShow(false);\n      }\n    };\n\n    anchorRef.current?.addEventListener('mouseenter', showFn);\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('wheel', handleWheel);\n\n    return () => {\n      anchorRef.current?.removeEventListener('mouseenter', showFn);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('wheel', handleWheel);\n      observer.disconnect();\n    };\n  }, []);\n\n  // set or find the container element that the tooltip should not overflow\n  // defaults to document.body\n  useEffect(() => {\n    if (props.container?.getBoundingClientRect) {\n      containerRef.current = props.container;\n    } else {\n      containerRef.current = document.querySelector(props.container) ?? {\n        getBoundingClientRect: () => ({\n          left: 0,\n          top: 0,\n          right: window.innerWidth,\n          bottom: window.innerHeight,\n        }),\n      };\n    }\n  }, [props.container]);\n\n  // determine if the tooltip position needs to be adjusted so it doesn't overflow the edge of the container or screen\n  useEffect(() => {\n    if (anchorBox.width) {\n      const refBox = ref.current.getBoundingClientRect();\n      const containerBox = containerRef.current.getBoundingClientRect();\n      if (/^top$|^bottom$/.test(props.orientation)) {\n        const leftOffset = containerBox.left - (anchorBox.left + anchorBox.width / 2 - refBox.width / 2);\n        const rightOffset = containerBox.right - (anchorBox.right - anchorBox.width / 2 + refBox.width / 2);\n\n        if (leftOffset > 0) {\n          setOverflow(leftOffset + 6);\n        } else if (rightOffset < 0) {\n          setOverflow(rightOffset - 6);\n        } else {\n          setOverflow(0);\n        }\n      } else {\n        const topOffset = containerBox.top - (anchorBox.top + anchorBox.height / 2 - refBox.height / 2);\n        const bottomOffset = containerBox.bottom - (anchorBox.bottom - anchorBox.height / 2 + refBox.height / 2);\n\n        if (topOffset > 0) {\n          setOverflow(topOffset + 6);\n        } else if (bottomOffset < 0) {\n          setOverflow(bottomOffset - 6);\n        } else {\n          setOverflow(0);\n        }\n      }\n    }\n\n    if (shouldOpen.current) {\n      setShow(true);\n    }\n  }, [anchorBox, props.orientation, props.children]);\n\n  const tipPos = ref.current?.getBoundingClientRect() ?? {};\n  const pointerInner = props.size === 'sm' ? 6 : 10;\n  const pointerOuter = props.size === 'sm' ? 8 : 12;\n\n  return (\n    <div\n      className={`tooltip ${props.orientation} ${props.size}`}\n      ref={ref}\n      css={[\n        {\n          position: anchorRef.current ? 'fixed' : 'absolute',\n          opacity: 0,\n          visibility: 'hidden',\n          transition: '300ms ease',\n          transitionProperty: 'opacity visibility',\n        },\n        show && {\n          opacity: 1,\n          visibility: 'visible',\n          transition: '300ms 200ms ease',\n        },\n        /^top$|^bottom$/.test(props.orientation) && {\n          ':before': {\n            left: `calc(50% - ${pointerOuter}px - ${overflow}px)`,\n          },\n          ':after': {\n            left: `calc(50% - ${pointerInner}px - ${overflow}px)`,\n          },\n        },\n        /^left$|^right$/.test(props.orientation) && {\n          ':before': {\n            top: `calc(50% - ${pointerOuter}px - ${overflow}px)`,\n          },\n          ':after': {\n            top: `calc(50% - ${pointerInner}px - ${overflow}px)`,\n          },\n        },\n        props.orientation === 'top' && {\n          top: `${anchorBox.top - tipPos.height - pointerOuter}px`,\n          left: `${anchorBox.left + anchorBox.width / 2 + overflow - tipPos.width / 2}px`,\n        },\n        props.orientation === 'bottom' && {\n          top: `${anchorBox.top + anchorBox.height + pointerOuter}px`,\n          left: `${anchorBox.left + anchorBox.width / 2 + overflow - tipPos.width / 2}px`,\n        },\n        props.orientation === 'left' && {\n          top: `${anchorBox.top + anchorBox.height / 2 + overflow - tipPos.height / 2}px`,\n          left: `${anchorBox.left - tipPos.width - pointerOuter}px`,\n        },\n        props.orientation === 'right' && {\n          top: `${anchorBox.top + anchorBox.height / 2 + overflow - tipPos.height / 2}px`,\n          left: `${anchorBox.left + anchorBox.width + pointerOuter}px`,\n        },\n        {\n          maxWidth: props.maxWidth,\n        },\n        {\n          [`&.tooltip.${props.orientation}.${props.size}`]: props.className,\n        },\n      ]}\n      data-testid={show ? 'tooltip-in' : 'tooltip-out'}\n    >\n      {props.children}\n    </div>\n  );\n};\n\nTooltip.componentDescription = 'Informational tooltip.';\nTooltip.componentKey = 'tooltip';\nTooltip.componentName = 'Tooltip';\nTooltip.propTypes = {\n  container: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n  maxWidth: PropTypes.number,\n  orientation: PropTypes.string,\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n};\n\nTooltip.defaultProps = {\n  maxWidth: 380,\n  orientation: 'top',\n  size: 'md',\n};\n\nexport default Tooltip;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport Tooltip from '../tooltip';\nimport { isNil } from 'lodash';\n\nconst Button = ({\n  block,\n  children,\n  className,\n  danger,\n  disabled,\n  hasTooltipWhenDisabled,\n  onClick,\n  size,\n  tooltip,\n  tooltipOrientation,\n  tooltipContainer,\n  tooltipMaxWidth,\n  tooltipSize,\n  type,\n}) => {\n  const handleClick = e => {\n    stopPropagation(e);\n    if (!disabled) {\n      onClick();\n    }\n  };\n\n  const stopPropagation = e => {\n    if (typeof e !== 'undefined') {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  const renderContent = () => {\n    const tooltipProps = {\n      orientation: tooltipOrientation,\n      container: tooltipContainer,\n      maxWidth: tooltipMaxWidth,\n      size: tooltipSize,\n    };\n    return [\n      <div key='btn-content' className='btn-content'>\n        {children}\n      </div>,\n      !isNil(tooltip) && (!disabled || hasTooltipWhenDisabled) && (\n        <Tooltip key='dropdown' {...tooltipProps}>\n          {tooltip}\n        </Tooltip>\n      ),\n    ];\n  };\n\n  const classes = [\n    'button',\n    danger && 'danger',\n    disabled && 'disabled',\n    type,\n    `size-${size}`,\n    block && 'block',\n    className,\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const props = {\n    children: renderContent(),\n    onClick: e => handleClick(e),\n    type: 'button',\n  };\n\n  return <button className={classes} {...props} />\n};\n\nButton.componentDescription = 'Standard extendable button.';\nButton.componentKey = 'button';\nButton.componentName = 'Button';\n\nButton.propTypes = {\n  /** Full width button. */\n  block: PropTypes.bool,\n  /** class to be added to className */\n  className: PropTypes.string,\n  /** Button color will be theme's \"danger\" color. */\n  danger: PropTypes.bool,\n  /** Boolean whether the button is disabled. */\n  disabled: PropTypes.bool,\n  /** Whether to show the tooltip even if the button is disabled */\n  hasTooltipWhenDisabled: PropTypes.bool,\n  /** Callback function when button is clicked. */\n  onClick: PropTypes.func,\n  /** Button size. Options are \"lg\", \"md\", and \"sm\". */\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n  /** Tooltip message. Only shown when button is enabled unless hasTooltipWhenDisabled prop is true. */\n  tooltip: PropTypes.node,\n  /** Top, bottom, left or right tooltip alignment. */\n  tooltipOrientation: PropTypes.oneOf(['top', 'bottom', 'left', 'right']),\n  /** Boundary container that the tooltip should not overflow. Can be a query selector string or a ref to an element. */\n  tooltipContainer: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n  /** max width of the tooltip */\n  tooltipMaxWidth: PropTypes.number,\n  /** adjusts font-size and line height of tooltip */\n  tooltipSize: PropTypes.oneOf(['sm', 'md', 'lg']),\n  /** Button style type. Options are \"primary\", \"secondary\", and \"tertiary\". */\n  type: PropTypes.oneOf(['primary', 'secondary', 'tertiary']),\n};\n\nButton.defaultProps = {\n  block: false,\n  className: '',\n  danger: false,\n  disabled: false,\n  onClick: () => {},\n  size: 'md',\n  type: 'secondary',\n  tooltipSize: 'lg',\n};\n\nexport default Button;\n","// import Icons from './icons';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nconst Icon = props => {\n  function icon(original) {\n    const name = original.substring(0, original.length - 4);\n\n    if (original.length - original.indexOf('reg') === 3) {\n      return ['far', name];\n    } else if (original.length - original.indexOf('lgt') === 3) {\n      return ['fal', name];\n    } else if (original.length - original.indexOf('sld') === 3) {\n      return ['fas', name];\n    } else {\n      console.error('You have not provided a valid icon type');\n      return ['fas', name];\n    }\n  }\n\n  // if (\n  //   [\n  //     'applicant-pending',\n  //     'applicant-ready',\n  //     'batch-order',\n  //     'draft-icon',\n  //     'new-order',\n  //     'revert-color',\n  //     'xml-ready',\n  //   ].includes(props.name)\n  // ) {\n  //   return (\n  //     <svg viewBox='0 0 1024 1024' className={'icon-' + props.name} onClick={() => props.onClick()}>\n  //       <path d={Icons[props.name]} />\n  //     </svg>\n  //   );\n  // }\n\n  const iconProps = {\n    border: props.border,\n    color: props.color,\n    'data-testid': props.testid,\n    fixedWidth: props.fixedWidth,\n    flip: props.flip,\n    icon: icon(props.name),\n    inverse: props.inverse,\n    listItem: props.listItem,\n    onClick: e => props.onClick(e),\n    pulse: props.pulse,\n    rotation: props.rotation,\n    size: props.size,\n    spin: props.spin,\n    style: props.style,\n    title: props.title,\n    transform: props.transform,\n  };\n\n  return <FontAwesomeIcon {...iconProps} />;\n};\n\nIcon.componentDescription = 'Icon library.';\nIcon.componentKey = 'icon';\nIcon.componentName = 'Icon';\n\nIcon.propTypes = {\n  border: PropTypes.bool,\n  color: PropTypes.string,\n  fixedWidth: PropTypes.bool,\n  flip: PropTypes.string,\n  inverse: PropTypes.bool,\n  listItem: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onClick: PropTypes.func,\n  pulse: PropTypes.bool,\n  rotation: PropTypes.number,\n  size: PropTypes.string,\n  spin: PropTypes.bool,\n  style: PropTypes.object,\n};\n\nIcon.defaultProps = {\n  onClick: () => {},\n};\n\nexport default Icon;\n","import React from 'react'\nimport './wrapper.sass'\n\nconst DropdownWrapper = ({children}) => {\n  return (\n    <div className='dropdown__wrapper'>{children}</div>\n  )\n}\n\nexport default DropdownWrapper","import React, { useEffect, useRef, useState } from \"react\"\nimport PropTypes from \"prop-types\"\nimport Icon from \"../icon\"\nimport DropdownWrapper from \"./DropdownWrapper\"\n\nconst Dropdown = ({ orientation, open, top, children, className }) => {\n\tconst ref = useRef()\n\tconst [scrollDiff, setScrollDiff] = useState(0)\n\tconst [scrollBottom, setScrollBottom] = useState(false)\n\n\tconst handleScrolling = () => {\n\t\tif (\n\t\t\tref.current.scrollTop + ref.current.clientHeight ===\n\t\t\tref.current.scrollHeight\n\t\t) {\n\t\t\tsetScrollBottom(true)\n\t\t} else {\n\t\t\tsetScrollBottom(false)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (open && ref.current) {\n\t\t\tsetScrollDiff(ref.current.scrollHeight - ref.current.clientHeight)\n\t\t} else if (!open) {\n\t\t\tsetScrollDiff(0)\n\t\t\tsetScrollBottom(false)\n\t\t}\n\t}, [open])\n\n\treturn (\n\t\t(open || null) && (\n\t\t\t<DropdownWrapper\n\t\t\t\tclassName={`dropdown ${className ?? \"\"} ${orientation === \"left\" ? 'left' : 'right'}`}\n\t\t\t\tstyles={{ top }}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tref={ref}\n\t\t\t\t\tclassName=\"dropdown-content\"\n\t\t\t\t\tstyle={\n\t\t\t\t\t\tscrollDiff <= 18 && {\n\t\t\t\t\t\t\tmaxHeight: `${ref.current?.scrollHeight}px !important`,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tonScroll={handleScrolling}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t\t{scrollDiff > 18 && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfontSize: \"12px\",\n\t\t\t\t\t\t\t\tpaddingLeft: 6,\n\t\t\t\t\t\t\t\tbackground: \"#ffcf8f\",\n\t\t\t\t\t\t\t\tcolor: \"#333\",\n\t\t\t\t\t\t\t\tborderBottomRightRadius: 3,\n\t\t\t\t\t\t\t\tborderBottomLeftRadius: 3,\n\t\t\t\t\t\t\t\ttransition: \"opacity 200ms ease-in-out\",\n\t\t\t\t\t\t\t\topacity: scrollBottom && 0.2\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\tscroll for more <Icon name=\"arrow-down-sld\" />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</DropdownWrapper>\n\t\t)\n\t)\n}\n\nDropdown.componentDescription = \"Generic dropdown menu.\"\nDropdown.componentKey = \"dropdown\"\nDropdown.componentName = \"Dropdown menu\"\n\nDropdown.propTypes = {\n\t/** Boolean whether to show or not */\n\topen: PropTypes.bool,\n\t/** Left or right aligned. Options are \"left\" or \"right\". */\n\torientation: PropTypes.oneOf([\"left\", \"right\"]),\n\t/** Distance from top positioned absolute. */\n\ttop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n}\n\nDropdown.defaultProps = {\n\torientation: \"right\",\n\ttop: \"50px\",\n}\n\nexport default Dropdown\n","import Button from \"../button\"\nimport Dropdown from \"../dropdown\"\nimport PropTypes from \"prop-types\"\nimport React, { useLayoutEffect, useRef, useState } from \"react\"\nimport \"./dropdown.sass\"\nimport useClickOutside from \"use-onclickoutside\"\nimport { isElement } from \"lodash\"\n\nconst DropdownBtn = ({\n\tcontainer,\n\tdropdownOpen,\n\tdropdownOrientation,\n\tonButtonClick,\n\t...props\n}) => {\n\tconst ref = useRef()\n\n\tuseClickOutside(ref, () => {\n\t\tif (dropdownOpen) {\n\t\t\tonButtonClick()\n\t\t}\n\t})\n\n\tconst [orientation, setOrientation] = useState(dropdownOrientation)\n\t// if a container element or container id is provided, orient the dropdown away\n\t// from the closest edge of the container, otherwise use the dropdownOrientation prop.\n\tuseLayoutEffect(() => {\n\t\tlet containerRef = container\n\t\tif (dropdownOpen && container) {\n\t\t\tif (!isElement(container)) {\n\t\t\t\tcontainerRef = document.getElementById(container)\n\t\t\t}\n\t\t\tconst dimensions = containerRef?.getBoundingClientRect()\n\t\t\tconst left = ref.current?.getBoundingClientRect().left - dimensions?.left\n\t\t\tsetOrientation(left < dimensions?.width / 2 ? \"left\" : \"right\")\n\t\t} else if (dropdownOpen) {\n\t\t\tsetOrientation(dropdownOrientation)\n\t\t}\n\t}, [container, dropdownOpen, dropdownOrientation])\n\tconst { buttonContent, styles, ...otherProps } = props\n\tconst buttonProps = {\n\t\tdisabled: props.buttonDisabled,\n\t\tonClick: onButtonClick,\n\t\tsize: props.buttonSize,\n\t\ttype: props.buttonType,\n\t}\n\treturn (\n\t\t<div\n\t\t\tref={ref}\n\t\t\t{...otherProps}\n\t\t\tclassName={`dropdown-button ${props.className ?? \"\"}`}\n\t\t>\n\t\t\t<Button {...buttonProps}>{props.buttonContent}</Button>\n\t\t\t<Dropdown\n\t\t\t\topen={dropdownOpen}\n\t\t\t\torientation={orientation}\n\t\t\t\t//  top={props.dropdownTop}\n\t\t\t>\n\t\t\t\t{props.children}\n\t\t\t</Dropdown>\n\t\t</div>\n\t)\n}\n\nDropdownBtn.componentDescription = \"Button that opens a dropdown menu.\"\nDropdownBtn.componentKey = \"dropdownBtn\"\nDropdownBtn.componentName = \"Dropdown button\"\n\nDropdownBtn.propTypes = {\n\tbuttonContent: PropTypes.node,\n\tbuttonDisabled: PropTypes.bool,\n\tbuttonSize: PropTypes.string,\n\tbuttonType: PropTypes.string,\n\t/* a container element or id to dynamically set dropdown orientation */\n\tcontainer: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n\tdropdownOpen: PropTypes.bool,\n\tdropdownOrientation: PropTypes.string,\n\t// dropdownTop: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\tonButtonClick: PropTypes.func,\n}\n\nDropdownBtn.defaultProps = {\n\tonButtonClick: () => {},\n}\n\nexport default DropdownBtn\n","import DropdownBtn from \"../dropdownBtn\";\nimport Icon from \"../icon\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport default class RichEditorDropdown extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dropdownRef = React.createRef();\n\n    const { controlWidth, dropdownWidth } = this.props;\n    this.state = {\n      showDropdown: false,\n      open: false,\n      controlWidth: controlWidth || 50,\n      dropdownWidth: (dropdownWidth && dropdownWidth + 'px') || 'fit-content',\n      orientation: 'left',\n    };\n  }\n\n  componentDidMount() {\n    this.setState({ showDropdown: true });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!prevProps.open && this.props.open) {\n      this.handleButtonClick();\n    }\n  }\n\n  handleButtonClick() {\n    this.setState(({ open }) => ({ open: !open }));\n  }\n\n  handleSubmit(style) {\n    this.props.onSelect(style);\n\n    this.handleButtonClick();\n  }\n\n  renderBtnContent() {\n    const { name, icon, style } = this.props.activeOption.display;\n\n    return (\n      <React.Fragment>\n        {icon ? <Icon name={icon} /> : null}\n        {name ? <span style={style}>{name}</span> : null}\n        {/* <Icon name='chevron-down-sld' /> */}\n      </React.Fragment>\n    );\n  }\n\n  render() {\n    // Conditionally render the DropdownBtn after component mounts because\n    // DropdownBtn uses useLayoutEffect which causes a warning with ssr\n    if (!this.state.showDropdown) return null;\n    const dropdownProps = {\n      buttonContent: this.renderBtnContent(),\n      dropdownOpen: this.state.open,\n      dropdownOrientation: this.state.orientation,\n      // dropdownTop: 42,\n      onButtonClick: () => this.handleButtonClick(),\n      styles: this.state,\n      ...(!this.props.allowInput && { onMouseDown: e => e.preventDefault() }),\n    };\n    const contentProps = {\n      handleSubmit: result => this.handleSubmit(result),\n      open: this.state.open,\n      ...this.props,\n    };\n    return <DropdownBtn {...dropdownProps}>{this.props.render(contentProps)}</DropdownBtn>;\n  }\n}\n\nRichEditorDropdown.propTypes = {\n  activeOption: PropTypes.shape({\n    display: PropTypes.object.isRequired,\n    type: PropTypes.string,\n  }),\n  allowInput: PropTypes.bool,\n  render: PropTypes.func,\n};\n\nRichEditorDropdown.defaultProps = {\n  activeOption: { display: {} },\n  allowInput: false,\n  render: () => {},\n};\n","import React from \"react\";\nimport Icon from \"../../../components/toolbar/icon\";\n\nconst Content = props => {\n  return (\n    <ul>\n      {props.list.map((item, index) => {\n        const icon = item.display.icon ? <Icon name={item.display.icon} /> : null;\n        const result = item.type || item.display.name;\n        return (\n          <li key={index} style={item.display.style} onClick={() => props.handleSubmit(result)}>\n            {icon} {item.display.name}\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport default Content;\n","import React from \"react\"\nimport RichEditorDropdown from \"../../components/toolbar/richEditorDropdown\"\nimport { availableAlignments, dropdownOptions } from \"../../constants\"\nimport Content from \"./content/Content\"\n\nconst Toolbar = ({\n\tsetAligment,\n\talignment,\n\tselectGroup,\n\tsetGroupAligment,\n}) => {\n\tconst name = \"alignment\"\n\n\tconst handleSelect = (type) => {\n        if(selectGroup.length){\n            return setGroupAligment(type)\n        }\n\t\treturn setAligment(type)\n\t}\n\tconst controlProps = {\n\t\tactiveOption: dropdownOptions[name].activeOption(alignment?alignment: 'justify'),\n\t\tcontrolWidth: dropdownOptions[name].controlWidth,\n\t\tdropdownWidth: dropdownOptions[name].dropdownWidth,\n\t\tkey: name,\n\t\tlist: availableAlignments,\n\t\tonSelect: handleSelect,\n\t}\n\treturn (\n\t\t<RichEditorDropdown\n\t\t\trender={(props) => <Content {...props} />}\n\t\t\t{...controlProps}\n\t\t/>\n\t)\n}\n\nexport default Toolbar\n","import {\n\tEditorState,\n\tgenKey,\n\tContentState,\n\tSelectionState,\n\tModifier,\n\tContentBlock,\n} from \"draft-js\"\nimport {\n\tuseContext,\n\tuseMemo,\n\tuseState,\n\tuseEffect,\n\tuseRef,\n\tChildren,\n\tcloneElement,\n} from \"react\"\nimport { ModalCtx } from \"../../App\"\nimport Cell from \"../components/cell/Cell\"\nimport { BLOCK_TYPES, HEADER_TYPES, inlineStylesTypes } from \"../constants\"\nimport Toolbar from \"./modal-toolbar/Toolbar\"\nimport \"./table.sass\"\n\nconst initialCell = {\n\trowKey: \"\",\n\tcolKey: \"\",\n\teditorState: EditorState.createEmpty(),\n\taligment: \"left\",\n}\nconst tolbarStyleButtons = inlineStylesTypes.map((s) => ({\n\tname: s.charAt(0),\n\tclassName: \"toolbar__button\",\n\tdataStyle: s,\n}))\n\nconst initCellStyle = {\n\tminWidth: 50,\n\twidth: 200,\n}\n\nconst blockTypes = [...HEADER_TYPES, ...BLOCK_TYPES]\n\nconst createIndexes = (arr) => {\n\tif (!arr) return null\n\treturn arr.reduce((acc, c, i) => {\n\t\tacc[c] = i\n\t\treturn acc\n\t}, {})\n}\n\nexport default function ModalTable({ closeModal }) {\n\tconst modalCtx = useContext(ModalCtx)\n\tconst { modal } = modalCtx\n\tconst [row, setRow] = useState(modal.row || null)\n\tconst [col, setCol] = useState(modal.col || null)\n\tconst [colStyle, setColStyle] = useState(modal.colStyle || null)\n\tconst [cell, setCell] = useState(modal.cell || null)\n\tconst [active, setActive] = useState(\"\")\n\tconst [styleKey, setStyleKey] = useState({\n\t\tevent: \"\",\n\t\teventState: [],\n\t})\n\tconst [headerKey, setHeaderKey] = useState({})\n\tconst [selectGroup, setSelectGroup] = useState([])\n\tconst [aligment, setAligment] = useState(\"\")\n\tconst [groupAligment, setGroupAligment] = useState(\"\")\n\tconst { defaultSchema } = modal\n\n\tfunction createState() {\n\t\tconst rowArr = []\n\t\tconst cellObject = {}\n\t\tconst colArr = []\n\t\tlet colKey = null\n\n\t\tdefaultSchema.forEach((r, i) => {\n\t\t\tconst rowKey = genKey()\n\t\t\trowArr.push(rowKey)\n\t\t\tr.forEach((c, j) => {\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tcolKey = genKey()\n\t\t\t\t\tcolArr.push(colKey)\n\t\t\t\t}\n\t\t\t\tconst cellKey = genKey()\n\t\t\t\tcellObject[cellKey] = {\n\t\t\t\t\t...initialCell,\n\t\t\t\t\trowKey,\n\t\t\t\t\tcellKey,\n\t\t\t\t\tcolKey: colArr[j],\n\t\t\t\t\taligment,\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t\tsetRow(rowArr)\n\t\tsetCell(cellObject)\n\t\tsetCol(colArr)\n\t}\n\n\tuseEffect(() => {\n\t\tif (modal.isOpen && defaultSchema && !modal.tableSchema) {\n\t\t\tcreateState()\n\t\t}\n\t}, [modal])\n\n\tconst renderSchema = useMemo(() => {\n\t\tif (!row || !cell || !col) {\n\t\t\treturn []\n\t\t}\n\t\tconst colIndexMap = createIndexes(col)\n\t\tconst rowIndexMap = createIndexes(row)\n\t\treturn Object.keys(cell).reduce((acc, c) => {\n\t\t\tconst { rowKey, colKey } = cell[c]\n\t\t\tacc[rowIndexMap[rowKey]] = acc[rowIndexMap[rowKey]] ?? []\n\t\t\tacc[rowIndexMap[rowKey]][colIndexMap[colKey]] = cell[c]\n\t\t\treturn acc\n\t\t}, [])\n\t}, [row, cell, col])\n\n\tfunction handleSave() {\n\t\tconst getSchema = renderSchema\n\n\t\tconst prepareSchema = getSchema.map((r) =>\n\t\t\tr.map((c) => {\n\t\t\t\tconst contentState = c.editorState.getCurrentContent()\n\t\t\t\tc[\"contentState\"] = contentState\n\t\t\t\treturn c\n\t\t\t})\n\t\t)\n\t\tconst { generalEditorState } = modal\n\t\tlet contentState = generalEditorState.getCurrentContent()\n\t\tlet selection = generalEditorState.getSelection()\n\t\tcontentState = Modifier.splitBlock(contentState, selection)\n\t\tconst blockArray = contentState.getBlocksAsArray()\n\t\tconst currBlock = blockArray.find(\n\t\t\t(e) => e.getData().get(\"tableKey\") === modal.tableKey\n\t\t)\n\t\tconst index = blockArray.findIndex((block) => block === currBlock)\n\t\tconst data = currBlock.getData()\n\t\tconst newData = data\n\t\t\t.set(\"tableSchema\", prepareSchema)\n\t\t\t.set(\"row\", row)\n\t\t\t.set(\"cell\", cell)\n\t\t\t.set(\"col\", col)\n\t\t\t.set(\"colStyle\", colStyle)\n\t\tconst newBlock = new ContentBlock({\n\t\t\tkey: genKey(),\n\t\t\ttype: \"table\",\n\t\t\ttext: \" \",\n\t\t\tdata: newData,\n\t\t})\n\n\t\tblockArray.splice(index, 1, newBlock)\n\n\t\tconst entityMap = contentState.getEntityMap()\n\t\tcontentState = ContentState.createFromBlockArray(blockArray, entityMap)\n\t\tlet newEditorState = EditorState.push(\n\t\t\tgeneralEditorState,\n\t\t\tcontentState,\n\t\t\t\"insert-fragment\"\n\t\t)\n\t\tconst key = blockArray[0].getKey()\n\t\tselection = SelectionState.createEmpty(key)\n\t\tnewEditorState = EditorState.acceptSelection(newEditorState, selection)\n\t\tmodal.onChange(newEditorState)\n\t\tcloseModal()\n\t}\n\n\tuseEffect(() => {\n\t\tsetCell((s) => {\n\t\t\tif (!aligment && !groupAligment) {\n\t\t\t\treturn s\n\t\t\t}\n\t\t\tif (active) {\n\t\t\t\treturn { ...s, [active]: { ...s[active], aligment } }\n\t\t\t}\n\t\t\treturn Object.keys(s).reduce((acc, c) => {\n\t\t\t\tacc[c] = { ...s[c], aligment }\n\t\t\t\treturn acc\n\t\t\t}, {})\n\t\t})\n\t}, [aligment])\n\n\tuseEffect(() => {\n\t\tsetCell((s) => {\n\t\t\tconst group = selectGroup.reduce((acc, c) => {\n\t\t\t\tacc[c] = { ...s[c], aligment: groupAligment }\n\t\t\t\treturn acc\n\t\t\t}, {})\n\t\t\treturn { ...s, ...group }\n\t\t})\n\t}, [groupAligment])\n\n\tif (!modal.isOpen) {\n\t\treturn null\n\t}\n\n\tfunction handleToolbar(e) {\n\t\te.preventDefault()\n\t\tconst style = e.target.getAttribute(\"data-style\")\n\t\tsetStyleKey((s) => {\n\t\t\tconst styleInArray = s.eventState.includes(style)\n\t\t\tlet state = []\n\t\t\tif (styleInArray) {\n\t\t\t\tstate = s.eventState.filter((k) => k !== style)\n\t\t\t} else {\n\t\t\t\tstate = [...s.eventState, style]\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...s,\n\t\t\t\tevent: style,\n\t\t\t\teventState: state,\n\t\t\t}\n\t\t})\n\t}\n\tconst handleHeaderTypes = (e) => {\n\t\te.preventDefault()\n\t\tconst style = e.target.getAttribute(\"data-style\")\n\t\tif (active) {\n\t\t\tsetHeaderKey((s) => {\n\t\t\t\tif (!s[active]) {\n\t\t\t\t\ts[active] = {}\n\t\t\t\t}\n\t\t\t\tif (s[active] === style) {\n\t\t\t\t\treturn { ...s, [active]: \"\" }\n\t\t\t\t}\n\t\t\t\treturn { ...s, [active]: style }\n\t\t\t})\n\t\t}\n\t}\n\tconsole.log(colStyle && colStyle, \"ACTIVE\")\n\treturn (\n\t\t<div className=\"table__wrapper\">\n\t\t\t<div className=\"toolbar__wrapper\">\n\t\t\t\t<ul className=\"toolbar\">\n\t\t\t\t\t{tolbarStyleButtons.map((e) => (\n\t\t\t\t\t\t<li key={e.dataStyle}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tdata-style={e.dataStyle}\n\t\t\t\t\t\t\t\tdata-active={styleKey.eventState.some((k) => k === e.dataStyle)}\n\t\t\t\t\t\t\t\tclassName={e.className}\n\t\t\t\t\t\t\t\tonMouseDown={handleToolbar}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{e.name}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t\t<ul className=\"toolbar\">\n\t\t\t\t\t\t{blockTypes.map((e) => (\n\t\t\t\t\t\t\t<li key={e.label}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonMouseDown={handleHeaderTypes}\n\t\t\t\t\t\t\t\t\tdata-style={e.style}\n\t\t\t\t\t\t\t\t\tdata-active={\n\t\t\t\t\t\t\t\t\t\theaderKey[active] && headerKey[active] === e.style\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName=\"toolbar__button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{e.label}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t\t<Toolbar\n\t\t\t\t\t\tsetAligment={setAligment}\n\t\t\t\t\t\talignment={aligment}\n\t\t\t\t\t\tgroupAligment={groupAligment}\n\t\t\t\t\t\tsetGroupAligment={setGroupAligment}\n\t\t\t\t\t\tselectGroup={selectGroup}\n\t\t\t\t\t/>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<EditTableWrapper\n\t\t\t\tsetSelectGroup={setSelectGroup}\n\t\t\t\tselectGroup={selectGroup}\n\t\t\t\tcol={col}\n\t\t\t\trow={row}\n\t\t\t\tcell={cell}\n\t\t\t\tactive={active}\n\t\t\t\tsetCol={setCol}\n\t\t\t\tsetCell={setCell}\n\t\t\t\tcolStyle={colStyle}\n\t\t\t\tsetColStyle={setColStyle}\n\t\t\t>\n\t\t\t\t{({ clicking, enterHandler }) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{renderSchema.map((row, j) => (\n\t\t\t\t\t\t\t\t<tr key={j}>\n\t\t\t\t\t\t\t\t\t{row.map((cell, i) => (\n\t\t\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\t\t\tkey={cell.cellKey}\n\t\t\t\t\t\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\t\t\t\t\t\t{...cell}\n\t\t\t\t\t\t\t\t\t\t\tonChange={setCell}\n\t\t\t\t\t\t\t\t\t\t\tsetActive={setActive}\n\t\t\t\t\t\t\t\t\t\t\tstyleKey={styleKey}\n\t\t\t\t\t\t\t\t\t\t\theaderKey={headerKey}\n\t\t\t\t\t\t\t\t\t\t\tactive={active}\n\t\t\t\t\t\t\t\t\t\t\tselectGroup={selectGroup}\n\t\t\t\t\t\t\t\t\t\t\tsetSelectGroup={setSelectGroup}\n\t\t\t\t\t\t\t\t\t\t\tclicking={clicking}\n\t\t\t\t\t\t\t\t\t\t\tenterHandler={enterHandler}\n\t\t\t\t\t\t\t\t\t\t\tsetColStyle={setColStyle}\n\t\t\t\t\t\t\t\t\t\t\tcellStyle={colStyle && colStyle[cell.colKey]}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</EditTableWrapper>\n\t\t\t<button onClick={handleSave}>save</button>\n\t\t</div>\n\t)\n}\n\nfunction EditTableWrapper({\n\tchildren,\n\tsetSelectGroup,\n\tcol,\n\trow,\n\tcell,\n\tselectGroup,\n\tactive,\n\tsetCell,\n\tsetCol,\n\tsetColStyle,\n\tcolStyle,\n}) {\n\tconst ref = useRef(null)\n\tconst [clicking, setClicking] = useState(false)\n\tconst [contextMenu, setContextMenu] = useState({\n\t\tisOpen: false,\n\t\ttarget: null,\n\t})\n\tconst colMap = createIndexes(col)\n\tconst rowMap = createIndexes(row)\n\n\tconst eventEnter = (e) => {\n\t\tconst key = e.currentTarget.dataset.key\n\t\tconst currentCell = cell[key]\n\t\tconst { rowKey, colKey } = currentCell\n\n\t\tconst curColIndex = colMap[colKey]\n\t\tconst startColIndex = colMap[cell[active].colKey]\n\t\tconst startRowIndex = rowMap[cell[active].rowKey]\n\t\tconst curRowIndex = rowMap[rowKey]\n\n\t\tconst correctCols = Object.keys(colMap).filter((c) => {\n\t\t\tif (curColIndex >= startColIndex) {\n\t\t\t\treturn colMap[c] <= curColIndex && colMap[c] >= startColIndex\n\t\t\t}\n\t\t\treturn colMap[c] >= curColIndex && colMap[c] <= startColIndex\n\t\t})\n\t\tconst correctRows = Object.keys(rowMap).filter((r) => {\n\t\t\tif (curRowIndex >= startRowIndex) {\n\t\t\t\treturn rowMap[r] <= curRowIndex && rowMap[r] >= startRowIndex\n\t\t\t}\n\t\t\treturn rowMap[r] >= curRowIndex && rowMap[r] <= startRowIndex\n\t\t})\n\n\t\tconst result = Object.keys(cell).filter((c) => {\n\t\t\tconst rKey = cell[c].rowKey\n\t\t\tconst cKey = cell[c].colKey\n\n\t\t\treturn correctCols.includes(cKey) && correctRows.includes(rKey)\n\t\t})\n\n\t\tsetSelectGroup(result)\n\t}\n\n\tconst handleMouseDown = (e) => {\n\t\tif (e.button === 0) {\n\t\t\treturn setClicking(true)\n\t\t}\n\t}\n\tconst handleMouseOver = (e) => {\n\t\tsetClicking(false)\n\t}\n\n\tconst handleKeyUp = (e) => {\n\t\tif (e.which === 27 && selectGroup.length) {\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\tsetSelectGroup([])\n\t\t}\n\t}\n\n\tconst handleContext = (e) => {\n\t\te.preventDefault()\n\t\tsetContextMenu({ isOpen: true, target: e.currentTarget, event: e })\n\t}\n\tfunction handleCol({ currentTarget }) {\n\t\tconst type = currentTarget.getAttribute(\"data-value\")\n\t\tconst colArr = [...col]\n\t\tconst needItems = row.length\n\t\tconst newColKey = genKey()\n\t\tconst insertObject = {}\n\t\tfor (let i = 0; i < needItems; i++) {\n\t\t\tconst cellKey = genKey()\n\t\t\tinsertObject[cellKey] = {\n\t\t\t\t...initialCell,\n\t\t\t\trowKey: row[i],\n\t\t\t\tcolKey: newColKey,\n\t\t\t\tcellKey,\n\t\t\t}\n\t\t}\n\n\t\tif (active) {\n\t\t\tconst { colKey } = cell[active]\n\t\t\tconst curIndex = col.findIndex((e) => e === colKey)\n\t\t\tconst updateIndex = curIndex + +type\n\t\t\tcolArr.splice(updateIndex, 0, newColKey)\n\t\t} else {\n\t\t\tcolArr.push(newColKey)\n\t\t}\n\t\tsetCol(colArr)\n\t\tsetCell((s) => ({\n\t\t\t...s,\n\t\t\t...insertObject,\n\t\t}))\n\t\tsetContextMenu((s) => ({ ...s, isOpen: false }))\n\t}\n\tconst handleSelect = ({ target }) => {\n\t\tif (!active) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst type = target.getAttribute(\"data-object\")\n\t\tconst neededKey = type === \"col\" ? \"colKey\" : \"rowKey\"\n\n\t\tconst key = cell[active][neededKey]\n\n\t\tconst selectedItems = Object.keys(cell).filter(\n\t\t\t(e) => key === cell[e][neededKey]\n\t\t)\n\t\tsetSelectGroup(selectedItems)\n\t\tsetContextMenu((s) => ({ ...s, isOpen: false }))\n\t}\n\n\tuseEffect(() => {\n\t\tif (ref.current && !colStyle && col) {\n\t\t\tconst tableWidth = ref.current.clientWidth\n\t\t\tconst cellWidth = tableWidth / col.length\n\t\t\tconst resizeState = col.reduce((acc, e) => {\n\t\t\t\tif (!acc[e]) {\n\t\t\t\t\tacc[e] = {}\n\t\t\t\t}\n\t\t\t\tacc[e] = { ...initCellStyle, width: cellWidth }\n\t\t\t\treturn acc\n\t\t\t}, {})\n\t\t\tsetColStyle(resizeState)\n\t\t}\n\t}, [ref.current, colStyle, col])\n\n\t// const setAlignmentInTable = (alignment, content, blocks) => {\n\t// \t// because cell style data is kept in the tableShape array stored with\n\t// \t// the first block in the table, we have to update that information here\n\t// \tlet blockMap = content.getBlockMap()\n\t// \tconst tableKey = blocks.first().getData().get(\"tableKey\")\n\t// \tlet firstTableBlock = blockMap.find(\n\t// \t\t(block) => block.getData().get(\"tablePosition\") === `${tableKey}-0-0`\n\t// \t)\n\t// \tconst tableShape = firstTableBlock.getData().get(\"tableShape\")\n\t// \tblocks.forEach((block) => {\n\t// \t\tconst [_, row, col] = block.getData().get(\"tablePosition\").split(\"-\")\n\t// \t\ttableShape[row][col].style = {\n\t// \t\t\t...tableShape[row][col].style,\n\t// \t\t\t\"text-align\": alignment,\n\t// \t\t}\n\t// \t})\n\t// \tlet data = firstTableBlock.getData()\n\t// \tdata = data.set(\"tableShape\", tableShape)\n\t// \tfirstTableBlock = firstTableBlock.merge({ data })\n\t// \tblockMap = blockMap.merge([[firstTableBlock.getKey(), firstTableBlock]])\n\t// \tcontent = content.merge({ blockMap })\n\t// \treturn content\n\t// }\n\treturn (\n\t\t<div className=\"table__wrapper\" ref={ref}>\n\t\t\t<table\n\t\t\t\tclassName=\"table table__edit\"\n\t\t\t\tonMouseDown={handleMouseDown}\n\t\t\t\tonMouseUp={handleMouseOver}\n\t\t\t\tonMouseLeave={handleMouseOver}\n\t\t\t\tonKeyUp={handleKeyUp}\n\t\t\t\tonContextMenu={handleContext}\n\t\t\t>\n\t\t\t\t{children({ enterHandler: eventEnter, clicking })}\n\t\t\t</table>\n\t\t\t<TableCtxMenu contextMenu={contextMenu} changeMenu={setContextMenu}>\n\t\t\t\t<button onClick={handleCol} data-value={0}>\n\t\t\t\t\tadd col before\n\t\t\t\t</button>\n\t\t\t\t<button onClick={handleCol} data-value={1}>\n\t\t\t\t\tadd col after\n\t\t\t\t</button>\n\t\t\t\t<button onClick={handleSelect} data-object=\"col\">\n\t\t\t\t\tselect col\n\t\t\t\t</button>\n\t\t\t\t<button onClick={handleSelect} data-object=\"row\">\n\t\t\t\t\tselect row\n\t\t\t\t</button>\n\t\t\t</TableCtxMenu>\n\t\t</div>\n\t)\n}\n\nfunction getPosition(e) {\n\tlet posx = 0\n\tlet posy = 0\n\n\tif (!e) e = window.event\n\n\tif (e.pageX || e.pageY) {\n\t\tposx = e.pageX\n\t\tposy = e.pageY\n\t} else if (e.clientX || e.clientY) {\n\t\tposx =\n\t\t\te.clientX + document.body.scrollLeft + document.documentElement.scrollLeft\n\t\tposy =\n\t\t\te.clientY + document.body.scrollTop + document.documentElement.scrollTop\n\t}\n\n\treturn {\n\t\tx: posx,\n\t\ty: posy,\n\t}\n}\n\nfunction TableCtxMenu({ contextMenu, changeMenu, children }) {\n\tconst { isOpen, target, event } = contextMenu\n\tconst [style, setStyle] = useState({})\n\tconst ref = useRef(null)\n\n\tconst childrenArray = Children.toArray(children)\n\tuseEffect(() => {\n\t\tconst { x, y } = getPosition(event)\n\t\tif (ref.current) {\n\t\t\tconst w = ref.current.clientWidth\n\t\t\tconst { width } = target.getBoundingClientRect()\n\t\t\tlet left = x - 50\n\t\t\tif (width - left < w) {\n\t\t\t\tleft = width - w\n\t\t\t}\n\n\t\t\tsetStyle({ top: y - 50, left })\n\t\t}\n\t}, [event])\n\n\tif (!isOpen) {\n\t\treturn null\n\t}\n\treturn (\n\t\t<>\n\t\t\t<ul ref={ref} className=\"context__menu\" style={style}>\n\t\t\t\t{childrenArray.map((e, i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={i}>{cloneElement(e, { className: \"context__item\" })}</li>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t\t<span\n\t\t\t\tclassName=\"context__overlay\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tchangeMenu({ isOpen: false, target: false })\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t)\n}\n","import React, { createContext,  useState } from \"react\"\n\nimport { Editor } from \"draft-js\"\nimport Modal from \"./lib/components/modal\"\nimport ModalTable from \"./lib/modalTable/ModalTable\"\n\nexport const ModalCtx = createContext()\n\nconst initialModal = {\n\tisOpen: false,\n\tdefaultSchema: null,\n\teditorState: null,\n\tgeneralEditorState: null,\n\ttableKey: \"\",\n\ttableSchema: null,\n}\n\nexport default function App({ children }) {\n\tconst [modal, setModal] = useState(initialModal)\n\n\treturn (\n\t\t<ModalCtx.Provider\n\t\t\tvalue={{\n\t\t\t\tmodal,\n\t\t\t\thandleModal: setModal,\n\t\t\t\thandleEditor: Editor.onChange,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t<Modal\n\t\t\t\tisOpen={modal.isOpen}\n\t\t\t\tonClose={() => {\n\t\t\t\t\tsetModal((s) => ({\n\t\t\t\t\t\t...s,\n\t\t\t\t\t\tisOpen: false,\n\t\t\t\t\t}))\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{(close) => <ModalTable closeModal={close} />}\n\t\t\t</Modal>\n\t\t</ModalCtx.Provider>\n\t)\n}\n","import { EditorState } from \"draft-js\"\nimport { RichUtils } from \"draft-js\"\nimport { SelectionState } from \"draft-js\"\nimport { Modifier } from \"draft-js\"\nimport { handleKeyCommand } from \"draft-js/lib/RichTextEditorUtil\"\n\nexport const handleTabInTable = (\n\tdirection = \"next\",\n\tcollapsed = false,\n\teditorState,\n\tonChange = () => {}\n) => {\n\tlet newEditorState = editorState\n\tlet selection = editorState.getSelection()\n\tlet contentState = editorState.getCurrentContent()\n\tlet targetKey = selection.getAnchorKey()\n\tlet targetBlock = contentState.getBlockForKey(targetKey)\n\tdo {\n\t\tif (direction === \"next\") {\n\t\t\ttargetBlock = contentState.getBlockAfter(targetKey)\n\t\t} else {\n\t\t\ttargetBlock = contentState.getBlockBefore(targetKey)\n\t\t}\n\t\ttargetKey = targetBlock && targetBlock.getKey()\n\t} while (\n\t\ttargetKey &&\n\t\t[\"atomic\", \"horizontal-rule\"].includes(targetBlock.getType())\n\t)\n\tif (!targetBlock && direction === \"next\") {\n\t\tselection = selection.merge({\n\t\t\tanchorOffset: contentState\n\t\t\t\t.getBlockForKey(selection.getAnchorKey())\n\t\t\t\t.getLength(),\n\t\t\tfocusOffset: contentState\n\t\t\t\t.getBlockForKey(selection.getAnchorKey())\n\t\t\t\t.getLength(),\n\t\t})\n\t\tcontentState = Modifier.splitBlock(contentState, selection)\n\t\ttargetBlock = contentState.getLastBlock()\n\t\tselection = SelectionState.createEmpty(targetBlock.getKey())\n\t\tcontentState = Modifier.setBlockType(contentState, selection, \"unstyled\")\n\t\ttargetBlock = contentState.getLastBlock()\n\t\tnewEditorState = EditorState.push(editorState, contentState, \"split-block\")\n\t} else if (!targetBlock) {\n\t\ttargetBlock = contentState.getBlockForKey(selection.getAnchorKey())\n\t}\n\tconst isTargetTable =\n\t\ttargetBlock.getData()?.get(\"dataType\") === \"table-cel\" && !collapsed\n\tconst endOffset = targetBlock.getLength()\n\tselection = SelectionState.createEmpty(targetBlock.getKey())\n\tselection = selection.merge({\n\t\tanchorOffset: isTargetTable || direction === \"next\" ? 0 : endOffset,\n\t\tfocusOffset: isTargetTable || direction === \"previous\" ? endOffset : 0,\n\t})\n\tonChange(EditorState.forceSelection(newEditorState, selection))\n}\n\nexport const handleKeysCommand = (command, newEditorState) => {\n\tswitch (command) {\n\t\tcase \"backspace\": {\n\t\t\t// removing images (\"atomic\" blocktype) with backspace requires special handling or the image tag and dataUrl can be left in the content but not visible.\n\t\t\tlet contentState = newEditorState.getCurrentContent()\n\t\t\tlet selectionState = newEditorState.getSelection()\n\t\t\tconst startKey = selectionState.getStartKey()\n\t\t\tconst offset = selectionState.getStartOffset()\n\t\t\tconst collapsed = selectionState.isCollapsed()\n\t\t\tconst blockBefore = contentState.getBlockBefore(startKey)\n\t\t\tconst currentBlockType = RichUtils.getCurrentBlockType(newEditorState)\n\t\t\tconst selection = newEditorState.getSelection()\n\t\t\tconst selectionKey = selection.getAnchorKey()\n\t\t\tconst currBlock = contentState.getBlockForKey(selectionKey)\n\t\t\tconst data = currBlock.getData()\n\t\t\tif (data.get(\"dataType\") === \"table-cel\" && collapsed && offset === 0) {\n\t\t\t\treturn \"handled\"\n\t\t\t} else if (\n\t\t\t\tdata.get(\"dataType\") !== \"table-cel\" &&\n\t\t\t\tcollapsed &&\n\t\t\t\tblockBefore?.getData().get(\"dataType\") === \"table-cel\" &&\n\t\t\t\toffset === 0\n\t\t\t) {\n\t\t\t\thandleTabInTable(\"previous\", true)\n\t\t\t\treturn \"handled\"\n\t\t\t} else if (\n\t\t\t\tcollapsed &&\n\t\t\t\toffset === 0 &&\n\t\t\t\tblockBefore?.getType() === \"page-break\"\n\t\t\t) {\n\t\t\t\tlet selection = SelectionState.createEmpty(blockBefore.getKey())\n\t\t\t\tcontentState = Modifier.setBlockData(contentState, selection, Map({}))\n\t\t\t\tcontentState = Modifier.setBlockType(\n\t\t\t\t\tcontentState,\n\t\t\t\t\tselection,\n\t\t\t\t\t\"unstyled\"\n\t\t\t\t)\n\t\t\t\tselection = selection.merge({\n\t\t\t\t\tfocusKey: selectionState.getFocusKey(),\n\t\t\t\t\tfocusOffset: 0,\n\t\t\t\t\thasFocus: true,\n\t\t\t\t})\n\t\t\t\tcontentState = Modifier.removeRange(contentState, selection, \"backward\")\n\t\t\t\t// onChange(EditorState.push(newEditorState, contentState, \"remove-range\"))\n\t\t\t\treturn \"handled\"\n\t\t\t} \n    //         else if (currentBlockType === \"page-break\") {\n\t// \t\t\tcontentState = Modifier.setBlockData(\n\t// \t\t\t\tcontentState,\n\t// \t\t\t\tselectionState,\n\t// \t\t\t\tMap({})\n\t// \t\t\t)\n\t// \t\t\tcontentState = Modifier.setBlockType(\n\t// \t\t\t\tcontentState,\n\t// \t\t\t\tselectionState,\n\t// \t\t\t\t\"unstyled\"\n\t// \t\t\t)\n\t// \t\t\tlet selection = selectionState\n\t// \t\t\tif (collapsed && contentState.getBlockAfter(startKey)) {\n\t// \t\t\t\tselection = selection.merge({\n\t// \t\t\t\t\tfocusKey: contentState.getBlockAfter(startKey).getKey(),\n\t// \t\t\t\t\tfocusOffset: 0,\n\t// \t\t\t\t\thasFocus: true,\n\t// \t\t\t\t})\n\t// \t\t\t}\n\t// \t\t\tcontentState = Modifier.removeRange(contentState, selection, \"backward\")\n\t// \t\t\tonChange(EditorState.push(newEditorState, contentState, \"remove-range\"))\n\t// \t\t\treturn \"handled\"\n\t// \t\t} else if (\n\t// \t\t\tcollapsed &&\n\t// \t\t\toffset === 0 &&\n\t// \t\t\t[\n\t// \t\t\t\t\"pasted-list-item\",\n\t// \t\t\t\t\"ordered-list-item\",\n\t// \t\t\t\t\"unordered-list-item\",\n\t// \t\t\t].includes(currentBlockType)\n\t// \t\t) {\n\t// \t\t\tcontentState = Modifier.setBlockType(\n\t// \t\t\t\tcontentState,\n\t// \t\t\t\tselectionState,\n\t// \t\t\t\t\"unstyled\"\n\t// \t\t\t)\n\t// \t\t\tonChange(\n\t// \t\t\t\tEditorState.push(newEditorState, contentState, \"change-block-type\")\n\t// \t\t\t)\n\t// \t\t\treturn \"handled\"\n\t// \t\t} else if (!collapsed) {\n\t// \t\t\treturn handleKeypressWhenSelectionNotCollapsed(newEditorState)\n\t// \t\t} else {\n\t// \t\t\treturn \"not-handled\"\n\t// \t\t}\n\t\t}\n\t// \tcase \"BOLD\":\n\t// \t\ttoggleInlineStyle(\"BOLD\")\n\t// \t\treturn \"handled\"\n\t// \tcase \"bullet_list\":\n\t// \t\ttoggleListType(\"BULLETLIST\")\n\t// \t\treturn \"handled\"\n\t// \tcase \"delete\":\n\t// \t\treturn handleDeleteKey()\n\t// \tcase \"float_left\":\n\t// \t\ttoggleBlockData({ float: \"left\" })\n\t// \t\treturn \"handled\"\n\t// \tcase \"float_right\":\n\t// \t\ttoggleBlockData({ float: \"right\" })\n\t// \t\treturn \"handled\"\n\t// \tcase \"INDENT\":\n\t// \t\tsetIndent(\"INDENT\")\n\t// \t\treturn \"handled\"\n\t// \tcase \"ITALIC\":\n\t// \t\ttoggleInlineStyle(\"ITALIC\")\n\t// \t\treturn \"handled\"\n\t// \tcase \"ordered_list\":\n\t// \t\ttoggleListType(\"ORDEREDLIST\")\n\t// \t\treturn \"handled\"\n\t// \tcase \"OUTDENT\":\n\t// \t\tsetIndent(\"OUTDENT\")\n\t// \t\treturn \"handled\"\n\t// \tcase \"UNDERLINE\":\n\t// \t\ttoggleInlineStyle(\"UNDERLINE\")\n\t// \t\treturn \"handled\"\n\t// \tcase \"shiftTab\":\n\t// \t\treturn \"handled\"\n\t// \tcase \"tab\":\n\t// \t\treturn \"handled\"\n\t\tdefault:\n\t\t\treturn \"not-handled\"\n\t}\n}\n","import { convertToRaw, ContentBlock, genKey, ContentState } from \"draft-js\"\nimport { Map } from \"immutable\"\nimport { createEditorStateFromRaw } from \"draftjs-conductor\"\nimport { useEffect } from \"react\"\n\nexport default function CreateTableComponent(props) {\n\tfunction createTable() {\n\t\tconst { blockProps, contentState } = props\n\t\tconst { blocks } = convertToRaw(contentState)\n\t\tconst index = blocks.findIndex((e) => e?.data?.dataType === \"table-create\")\n\t\tconst { onChange } = blockProps.getProps()\n\t\tconst createrBlock = blocks[index]\n\t\tconst { data } = createrBlock\n\t\tconst { rows, cols, tableKey, aligment } = data\n\t\tconst colArr = Array(cols)\n\t\t\t.fill(1)\n\t\t\t.map((e) => ({ key: genKey() }))\n\t\tconst rowArr = Array(rows).fill(colArr)\n\t\tconst newBlocks = []\n\n\t\tlet dataMap = Map({\n\t\t\ttableKey,\n\t\t\taligment,\n\t\t\tdataType: \"table-cel\",\n\t\t})\n\n\t\tdataMap = dataMap.set(\"defaultSchema\", rowArr)\n\n\t\tnewBlocks.push(\n\t\t\tnew ContentBlock({\n\t\t\t\tkey: genKey(),\n\t\t\t\ttype: \"table\",\n\t\t\t\ttext: \" \",\n\t\t\t\tdata: dataMap,\n\t\t\t})\n\t\t)\n\t\tconst prepareBlocks = [...contentState.getBlocksAsArray()]\n\t\tprepareBlocks.splice(index, 1, ...newBlocks)\n\n\t\tconst entityMap = contentState.getEntityMap()\n\t\tconst newState = ContentState.createFromBlockArray(prepareBlocks, entityMap)\n\t\tconst editorState = createEditorStateFromRaw(convertToRaw(newState))\n\t\tonChange(editorState)\n\t}\n\n\tuseEffect(() => {\n\t\tcreateTable()\n\t}, [])\n\n\treturn null\n}\n","import React from 'react'; // eslint-disable-line no-unused-vars\nimport { Image, HorizontalRule, Pagebreak, StyledBlock, Table, ListItem } from './blockRenderComponents';\nimport { camelCase, isEmpty, kebabCase } from 'lodash';\nimport { COLORS, FONTS, FONT_SIZES, MAX_LIST_DEPTH, defaultPreTagStyling } from './constants';\nimport { Map, OrderedSet } from 'immutable';\nimport { DefaultDraftInlineStyle, genKey } from 'draft-js';\n\n/**\n * blockRenderMap, customStyleMap, customStyleFn & getBlockRendererFn are used by draft.js to convert its internal data structure\n * into html for display in the editor's content-editable area.\n */\nexport const blockRenderMap = {\n  unstyled: {\n    element: 'div',\n  },\n  // using section tag for paragraph block type because Draftjs inserts extra divs within the content, resulting in\n  // a validateDOMNesting warning if p tag is used (<div> cannot be a descendant of <p>).\n  // This is only used while content is displayed in the editor. When the paragraph block type\n  // is exported to formLinker a <p> tag is used, as provided in the getStateToHtmlOptions function below.\n  paragraph: {\n    element: 'section',\n  },\n  // pasted-list-item is used for ul/ol lists that were pasted into the editor from another source, e.g. google docs\n  // and thus are formatted differently than natively created lists\n  'pasted-list-item': {\n    element: 'ol',\n  },\n  table: {\n    element: 'div',\n  },\n};\n\nexport const customStyleMap = (() => {\n  const styleMap = { ...DefaultDraftInlineStyle };\n  ['backgroundColor', 'color'].forEach(style => {\n    COLORS.forEach(color => {\n      styleMap[`${style}.${color}`] = { [style]: color };\n    });\n  });\n  FONTS.forEach(font => {\n    styleMap[`fontFamily.${font}`] = { fontFamily: font };\n  });\n  FONT_SIZES.forEach(size => {\n    styleMap[`fontSize.${size}`] = { fontSize: `${size}pt` };\n  });\n  return styleMap;\n})();\n\n// this is for handling inline styles, including draft's default styles, styles from the customStyleMap, and those from the style attribute of the html\nexport const customStyleFn = style => {\n  // \"style\" is an Immutable.js OrderedSet of inline styles for a given range of characters that share the same styling\n\n  // handle draftjs default styles\n  const defaultStyles = style.intersect(['BOLD', 'CODE', 'ITALIC', 'UNDERLINE']).reduce((map, v) => {\n    return map.merge(customStyleMap[v]);\n  }, Map());\n\n  style = style.subtract(['BOLD', 'CODE', 'ITALIC', 'UNDERLINE']);\n\n  // separate out any entries that are a string of multiple styles\n  let groupedStyles = style.filter(v => v.includes(':'));\n  style = style.subtract(groupedStyles);\n\n  // convert string containing multiple styles to a CSS styles object\n  groupedStyles = groupedStyles.reduce((map, v) => {\n    v = convertStyleStringToObject(v);\n    v = Map(v).mapKeys(k => camelCase(k));\n    return map.merge(v);\n  }, Map());\n\n  // convert style strings with single style to CSS styles objects and merge with groupedStyles\n  style = style\n    .map(v => v.split('.'))\n    .filter(v => v.every(vv => vv.length))\n    .reduce((map, v) => {\n      const key = v.shift().trim();\n      const val = v.join('.').trim();\n      return map.merge({ [key]: val });\n    }, groupedStyles.merge(defaultStyles))\n    .toJS();\n\n  if (isEmpty(style)) {\n    return null;\n  }\n  return style;\n};\n\nexport const getBlockRendererFn = (editor, getEditorState, onChange) => block => {\n  const type = block.getType();\n  console.log(block.getType());\n  switch (type) {\n    case 'atomic':\n      return {\n        component: Image,\n        editable: false,\n        props: {\n          editor,\n          getEditorState,\n          onChange,\n        },\n      };\n    case 'horizontal-rule':\n      return {\n        component: HorizontalRule,\n      };\n    case 'page-break':\n      return {\n        component: Pagebreak,\n      };\n    case 'pasted-list-item':\n      return {\n        component: ListItem,\n        editable: true,\n      };\n    case 'unstyled':\n    case 'paragraph':\n    case 'header-one':\n    case 'header-two':\n    case 'header-three':\n    case 'header-four':\n    case 'header-five':\n    case 'header-six':\n    case 'code-block':\n      return {\n        component: StyledBlock,\n        editable: true,\n      };\n    case 'table':\n      return {\n        component: Table,\n        editable: true,\n        props: {\n          editor,\n        },\n      };\n    default:\n      return null;\n  }\n};\n\nlet tableKey;\n\n/**\n * functions for converting html into draft.js data structure state\n */\nexport const stateFromHtmlOptions = {\n  // collect block level metadata\n  customBlockFn: element => {\n    const style = element.getAttribute('style') || '';\n    const className = element.getAttribute('class') || '';\n    let data = convertStyleStringToObject(style) || {};\n    data = className\n      .split(' ')\n      .filter(c => c.length)\n      .reduce((map, c) => {\n        const key = c.includes('depth') ? 'depth' : c;\n        const val = key === 'depth' ? +c.slice(5) : 'class';\n        map[key] = val;\n        return map;\n      }, data);\n    // identify lists that were pasted in from another source rather than created natively in the editor. These get handled as a custom block type.\n    if (\n      element.tagName === 'LI' &&\n      (element.parentNode.getAttribute('start') || element.style.listStyleType !== 'none') &&\n      !element.className.split(' ').find(c => ['ordered-list-item', 'unordered-list-item'].includes(c))\n    ) {\n      const listType = element.parentNode.tagName === 'UL' ? 'ul' : 'ol';\n      if (element.parentNode.firstElementChild === element) {\n        data.listStyles = convertStyleStringToObject(element.parentNode.getAttribute('style') ?? 'margin-left: 36pt;');\n        data.listStart =\n          element.getAttribute('start') ?? element.parentNode.getAttribute('start') ?? (listType === 'ul' ? 0 : 1);\n        let start = data.listStart;\n        for (const child of element.parentNode.children) {\n          if (listType === 'ul') {\n            child.setAttribute('start', 0);\n          } else {\n            child.setAttribute('start', start++);\n          }\n        }\n      } else {\n        data.listStart = element.getAttribute('start');\n      }\n      data['list-style-type'] = element.style.listStyleType || (listType === 'ul' ? 'disc' : 'decimal');\n      return { type: 'pasted-list-item', data };\n    }\n\n    if (element.firstChild && element.firstChild.tagName === 'IMG') {\n      let style = element.firstChild.getAttribute('style');\n      style = convertStyleStringToObject(style);\n      data = {\n        ...data,\n        ...(style && { imgStyle: Map(style) }),\n      };\n      return { type: 'atomic', data }\n    }\n    if (element.tagName === 'PRE') {\n      if (!data.background) {\n        data = convertStyleStringToObject(defaultPreTagStyling.map(v => v.join(': ')).join('; '));\n      }\n      return { type: 'code-block', data };\n    }\n    if (/break-after:|break-before:/.test(element.style.cssText)) {\n      return { type: 'page-break', data };\n    }\n    if (element.tagName === 'P') {\n      const noMargin =\n        element.style.margin?.startsWith('0') ||\n        (element.style.marginTop?.startsWith('0') && element.style.marginBottom?.startsWith('0'));\n      if (noMargin) return { type: 'unstyled', data };\n      return { type: 'paragraph', data };\n    }\n    if ((element.innerText || '').startsWith('---hr---')) {\n      return { type: 'horizontal-rule', data };\n    }\n    if (['TD', 'TH'].includes(element.tagName)) {\n      /**\n       * To preserve tables when converting html into Draft block types, we store the full\n       * table specifications with the first \"cell\", and save the table position for the others\n       */\n      const tableEl = element.closest('table');\n      const tHeadEl = element.closest('thead') ?? tableEl.querySelector('thead');\n      const tBodyEl = element.closest('tbody') ?? tableEl.querySelector('tbody');\n      const tableRows = tableEl.querySelectorAll('tr');\n      // But if this table has a nested table within it\n      // don't render the outer table or Draft-js will crash\n      if (tableEl.querySelector('table')) {\n        return { type: 'unstyled', data };\n      }\n\n      // empty elements get ignored and can break a table, replace unrendered characters,\n      // ensure at minimum there is an non-breaking space\n      if (isEmpty(element.textContent.replace(/\\s/g, ''))) {\n        element.innerHTML = '&nbsp;';\n      }\n\n      const prevCell = element.previousElementSibling;\n      const row = element.parentNode;\n      const prevRow = row.previousElementSibling;\n      // Check if this is not the first cell in the table, if it's not then we traverse the table\n      // structure just far enough to get the cell's position and store it in the data used to create\n      // the corresponding Draft block\n      if (prevCell || prevRow || (tHeadEl && [tableEl, tBodyEl].includes(row.parentNode))) {\n        let found = false;\n        for (let i = 0, rows = tableRows, rowCount = rows.length; i < rowCount; i++) {\n          for (let j = 0, cells = rows[i].children, colCount = cells.length; j < colCount; j++) {\n            if (cells[j] === element) {\n              data.tableKey = tableKey;\n              data.tablePosition = `${tableKey}-${i}-${j}`;\n              data.colspan = cells[j].getAttribute('colspan');\n              data.rowspan = cells[j].getAttribute('rowspan');\n              found = true;\n              break;\n            }\n          }\n          if (found) {\n            break;\n          }\n        }\n        return { type: 'table', data };\n      }\n      // Only the first cell in the table will go through the processing below, so the Draft block\n      // created for it will have all the necessary data to render the empty table structure into\n      // which we render the rest of the table blocks.\n      const colgroup = tableEl.querySelector('colgroup');\n      const tableShape = [];\n      tableKey = genKey();\n      data.tableKey = tableKey;\n      data.tablePosition = `${tableKey}-0-0`;\n      data.tableStyle = convertStyleStringToObject(tableEl.getAttribute('style')) || {\n        margin: '15px 0',\n        width: '100%',\n      };\n      data.tableStyle['border-collapse'] = 'collapse';\n      for (let i = 0, rows = tableRows, rowCount = rows.length; i < rowCount; i++) {\n        tableShape.push([]);\n        const defaultStyle = {};\n        if (i === 0) {\n          if (element.tagName === 'TH') {\n            defaultStyle['background-color'] = 'rgba(240, 240, 240, 0.8)';\n          }\n          data.rowStyle = [convertStyleStringToObject(rows[i].getAttribute('style')) || defaultStyle];\n        } else {\n          data.rowStyle.push(convertStyleStringToObject(rows[i].getAttribute('style')) || defaultStyle);\n        }\n        for (let j = 0, cells = rows[i].children, colCount = cells.length; j < colCount; j++) {\n          const defaultStyle = { border: '1px solid rgba(0, 0, 0, 0.2)', padding: '6px', 'text-align': 'center' };\n          if (cells[j].tagName === 'TH') {\n            defaultStyle['font-weight'] = 'bold';\n          }\n          const cellStyle = convertStyleStringToObject(cells[j].getAttribute('style')) || defaultStyle;\n          tableShape[i][j] = {\n            element: cells[j].tagName === 'TD' ? 'td' : 'th',\n            style: cellStyle,\n            colspan: cells[j].getAttribute('colspan'),\n            rowspan: cells[j].getAttribute('rowspan'),\n          };\n        }\n      }\n\n      data.tableShape = tableShape;\n      data.tableColgroup = colgroup?.outerHTML;\n      return { type: 'table', data };\n    }\n    return { data };\n  },\n\n  // collect inline style data - inline type elements are passed through this function (span, img, a, etc.)\n  customInlineFn: (element, { Style, Entity }) => {\n    if (element.tagName === 'IMG') {\n      // image styling is handled in the customBlockFn above\n      return null;\n    }\n    if (element.tagName === 'A') {\n      let data = {};\n      if (element.hasAttribute('target')) {\n        data = { target: element.getAttribute('target'), rel: 'noreferrer' };\n      }\n      return Entity('LINK', { ...data, url: element.getAttribute('href') });\n    }\n    let style = element.getAttribute('style');\n\n    if (!style) {\n      return null;\n    }\n\n    // if the element has multiple styles applied pass them all together as-is because the html import library's\n    // \"Style\" function currently doesn't support processing multiple styles separately\n    if (style.includes(';')) {\n      return Style(style);\n    }\n    // otherwise format the style to match the customStyleMap\n    style = style.split(':');\n    const key = camelCase(style.shift().trim());\n    const val = style.join(':').trim();\n    style = `${key}.${val}`;\n    if (style === 'textDecoration.underline') {\n      return null;\n    } // underline is handled automatically, don't override it\n    return Style(style);\n  },\n};\n\n// helper function converts style attribute string into key-value pairs\nfunction convertStyleStringToObject(style = '', data = {}) {\n  if (!style) {\n    return null;\n  }\n  return style\n    .split(';')\n    .filter(s => s.includes(':'))\n    .map(s => s.split(':'))\n    .reduce((map, s) => {\n      const key = s.shift().trim();\n      const val = s.join(':').trim();\n      map[key] = val;\n      return map;\n    }, data);\n}\n\n/**\n * function receives contentState from a draft.js instance and returns a set of helper functions\n * used to convert draft.js internal state into html for export outside of draft.js.\n */\nexport const getStateToHtmlOptions = contentState => ({\n  /**\n   * NOTE: the rich text editor relies on the following styles for ordered lists. For ordered list numbering to display correctly\n   * these styles should be included in the style tag or style sheet of any document that includes content from the rich text editor:\n   * .ordered-list-item:before { left: -36px; position: absolute; text-align: right; width: 30px; }\n   * .ordered-list-item:before { content: counter(ol0) \". \"; counter-increment: ol0; }\n   * .ordered-list-item.depth1:before { content: counter(ol1, lower-alpha) \") \"; counter-increment: ol1; }\n   * .ordered-list-item.depth2:before { content: counter(ol2, lower-roman) \". \"; counter-increment: ol2; }\n   * .ordered-list-item.depth3:before { content: counter(ol3, upper-alpha) \". \"; counter-increment: ol3; }\n   * .ordered-list-item.depth4:before { content: counter(ol4) \". \"; counter-increment: ol4; }\n   * .list.depth0:first-of-type { counter-reset: ol0; }\n   * .list.depth1:first-of-type { counter-reset: ol1; }\n   * .list.depth2:first-of-type { counter-reset: ol2; }\n   * .list.depth3:first-of-type { counter-reset: ol3; }\n   * .list.depth4:first-of-type { counter-reset: ol4; }\n   **/\n  inlineStyles: (() => {\n    const styles = {\n      BOLD: { style: { fontWeight: 'bold' } },\n      ITALIC: { style: { fontStyle: 'italic' } },\n      UNDERLINE: { style: { textDecoration: 'underline' } },\n      STRIKETHROUGH: { style: { textDecoration: 'line-through' } },\n    };\n    ['backgroundColor', 'color'].forEach(style => {\n      COLORS.forEach(color => {\n        styles[`${style}.${color}`] = { style: { [style]: color } };\n      });\n    });\n    FONTS.forEach(font => {\n      styles[`fontFamily.${font}`] = { style: { fontFamily: font } };\n    });\n    FONT_SIZES.forEach(size => {\n      styles[`fontSize.${size}`] = { style: { fontSize: `${size}pt` } };\n    });\n    return styles;\n  })(),\n\n  // this handles converting any inline styles not matched by the inlineStyles map above (custom added styles)\n  inlineStyleFn: style => {\n    style = customStyleFn(style);\n    return (\n      style && {\n        element: 'span',\n        style,\n      }\n    );\n  },\n\n  // Converting (rendering) custom block types, like \"paragraph\" and \"horizontal-rule\" to html is handled here\n  blockRenderers: {\n    'code-block': block => {\n      const blockStyles = OrderedSet(defaultPreTagStyling.map(v => v.join(': ')));\n      return `<pre${getClassesAndStyles({ block, blockStyles })}>${buildHtmlForBlockText(\n        '',\n        block,\n        contentState\n      )}</pre>`;\n    },\n    'page-break': block => {\n      return '<div style=\"page-break-after: always\"><br></div>';\n    },\n    // each draft.js block of type \"paragraph\" is passed through this function for export as html\n    paragraph: block => {\n      if (block.getLength() === 0) {\n        return `<p${getClassesAndStyles({ block })}><br></p>`;\n      }\n      // get block-level styling and classes if any\n      // \"result\" will be the html eventually returned from this function\n      const result = `<p${getClassesAndStyles({ block })}>${buildHtmlForBlockText('', block, contentState)}</p>`;\n      return result;\n    },\n    unstyled: block => {\n      if (block.getLength() === 0) {\n        return `<div${getClassesAndStyles({ block })}><br></div>`;\n      }\n      // get block-level styling and classes if any\n      // \"result\" will be the html eventually returned from this function\n      const result = `<div${getClassesAndStyles({ block })}>${buildHtmlForBlockText('', block, contentState)}</div>`;\n      return result;\n    },\n    'horizontal-rule': block => {\n      return '<hr>';\n    },\n    atomic: block => {\n      const data = block.getData();\n      let figStyle = [];\n      let imgStyle = [];\n      let classes = [];\n      data.forEach((v, k) => {\n        if (v === 'class') {\n          classes.push(k);\n        } else if (k === 'imgStyle') {\n          // styles on img tag are saved under the key imgStyle\n          v.forEach((vv, kk) => imgStyle.push(`${kk}: ${vv}`));\n        } else {\n          figStyle.push(`${k}: ${v}`);\n        }\n      });\n      const float = data.get('float');\n      if (float && !data.get('margin')) {\n        figStyle.push(float === 'right' ? 'margin: 0 8px 0 0' : 'margin: 0 0 0 8px');\n      }\n      if (block.get('depth')) {\n        figStyle.push(`margin-left: ${block.get('depth') * 2.5}em; `);\n      }\n      classes = classes.join(' ') && ` class=\"${classes.join(' ')}\"`;\n      figStyle = figStyle.join('; ') && ` style=\"${figStyle.join('; ')}\"`;\n      imgStyle = ` style=\"${imgStyle.join('; ')}\"`;\n\n      const { src } = (block.getEntityAt(0) && contentState.getEntity(block.getEntityAt(0)).getData()) || {};\n      return `<figure${classes}${figStyle}><img src=\"${src}\"${imgStyle}/></figure>`;\n    },\n    'pasted-list-item': block => {\n      const prevBlock = contentState.getBlockBefore(block.getKey());\n      if (prevBlock?.getType() === block.getType()) {\n        return '';\n      }\n      const data = block.getData();\n      let start = data.get('listStart');\n      start = (start && ` start=\"${start}\"`) || '';\n      let listStyles = Map(data.get('listStyles'))\n        .reduce((set, v, k) => {\n          return set.add(`${k}: ${v}`);\n        }, OrderedSet())\n        .toArray()\n        .join('; ');\n      listStyles = listStyles && ` style=\"${listStyles}\"`;\n      const listItems = contentState\n        .getBlockMap()\n        .skipUntil(v => v === block)\n        .takeWhile(v => v.getType().endsWith('list-item'))\n        .toList();\n      const listTag = block.getData().get('listStart') > 0 ? 'ol' : 'ul';\n      let currentDepth = block.getDepth();\n      return `<${listTag}${listStyles}${start}>${listItems\n        .map(block => {\n          const depth = block.getDepth();\n          const openTag = depth > currentDepth ? `<${listTag}><li` : depth < currentDepth ? `</${listTag}><li` : '<li';\n          currentDepth = depth;\n          return `\n${openTag}${getClassesAndStyles({ block })}>${buildHtmlForBlockText('', block, contentState)}</li>`;\n        })\n        .toArray()\n        .join('')}</${listTag}>`;\n    },\n    table: block => {\n      const prevBlock = contentState.getBlockBefore(block.getKey());\n      if (prevBlock && prevBlock.getType() === 'table') {\n        return '';\n      }\n      const data = block.getData();\n      const tableShape = data.get('tableShape');\n      if (!tableShape) {\n        return '<table><tbody><tr><td>&nbsp;</td></tr></tbody></table>';\n      }\n      let tableStyle = Map(data.get('tableStyle'))\n        .reduce((set, v, k) => {\n          return set.add(`${k}: ${v}`);\n        }, OrderedSet())\n        .toArray()\n        .join('; ');\n      tableStyle = tableStyle && ` style=\"${tableStyle}\"`;\n      const tableKey = data.get('tableKey');\n      const tableBlocks = contentState\n        .getBlockMap()\n        .skipUntil(v => v.getType() === 'table' && v.getData().get('tableKey') === tableKey)\n        .takeWhile(v => v.getType() === 'table')\n        .toList();\n      const colgroup = data.get('tableColgroup') ?? '';\n      let cellCounter = 0;\n      return `<table${tableStyle}>${colgroup}<tbody>${tableShape\n        .map((row, i) => {\n          let rowStyle = Map(block.getData().get('rowStyle')[i])\n            .reduce((set, v, k) => {\n              return set.add(`${k}: ${v}`);\n            }, OrderedSet())\n            .toArray()\n            .join('; ');\n          rowStyle = rowStyle && ` style=\"${rowStyle}\"`;\n          return `<tr${rowStyle}>${row\n            .map((cell, j) => {\n              const tag = cell.element;\n              let cellStyle = Map(cell.style)\n                .reduce((set, v, k) => {\n                  return set.add(`${k}: ${v}`);\n                }, OrderedSet())\n                .toArray()\n                .join('; ');\n              cellStyle = cellStyle && ` style=\"${cellStyle}\"`;\n              let cellBlock = tableBlocks.get(cellCounter);\n              let colspan = cellBlock.getData().get('colspan');\n              colspan = colspan ? ` colspan=${colspan}` : '';\n              let rowspan = cellBlock.getData().get('rowspan');\n              rowspan = rowspan ? ` rowspan=${rowspan}` : '';\n\n              const [, rowNum, colNum] = cellBlock?.getData().get('tablePosition').split('-') ?? [];\n              if (i !== +rowNum || j !== +colNum) {\n                cellBlock = null;\n              } else {\n                cellCounter++;\n              }\n              return `<${tag}${cellStyle}${colspan}${rowspan}>${buildHtmlForBlockText(\n                '',\n                cellBlock,\n                contentState\n              )}</${tag}>`;\n            })\n            .join('')}</tr>`;\n        })\n        .join('')}</tbody></table>`;\n    },\n  },\n\n  // blockStyleFn: block => {\n  //   const type = block.getType();\n  //   const depth = block.getDepth();\n  //   const data = block.getData();\n  //   const attributes = {};\n  //   let styles = OrderedSet();\n  //   let classes = OrderedSet();\n\n  //   data.forEach((v, k) => {\n  //     if (v === 'class') {\n  //       classes = classes.add(k);\n  //     } else if (!['depth', 'listStyles', 'listStart'].includes(k)) {\n  //       styles = styles.add(`${k}: ${v}`);\n  //     }\n  //   });\n\n  //   if (depth > 0 && !type.includes('list-item')) {\n  //     styles = styles.add(`margin-left:${2.5 * depth}em`);\n  //   } else if (type.includes('unordered-list-item') && depth <= MAX_LIST_DEPTH) {\n  //     classes.remove('ordered-list-item');\n  //     classes = OrderedSet.of('list', 'unordered-list-item', `depth${depth}`).union(classes);\n  //     styles = OrderedSet.of(\n  //       `margin-left:${1.5 + (depth === 0 ? 1 : 0)}em`,\n  //       `list-style-type: ${depth === 0 ? 'disc' : depth === 1 ? 'circle' : 'square'}`,\n  //       'position: relative'\n  //     ).union(styles);\n  //   } else if (type.includes('ordered-list-item') && depth <= MAX_LIST_DEPTH) {\n  //     classes.remove('unordered-list-item');\n  //     classes = OrderedSet.of('list', 'ordered-list-item', `depth${depth}`).union(classes);\n  //     styles = OrderedSet.of(\n  //       `margin-left: ${1.5 + (depth === 0 ? 1 : 0)}em`,\n  //       'list-style-type: none',\n  //       'position: relative'\n  //     ).union(styles);\n  //   }\n\n  //   if (type === 'blockquote')\n  //     styles = styles.add(\n  //       \"color: #999999; font-family: 'Hoefler Text', Georgia, serif; font-style: italic; line-height: 1.15em; border: none; border-left: 5px solid rgba(100, 100, 100, 0.5); margin: 0 2em; padding-left: 1em;\"\n  //     );\n  //   if (classes.size) attributes.class = classes.toArray().join(' ');\n  //   if (styles.size) attributes.style = styles.toArray().join(';');\n  //   return { attributes };\n  // },\n\n  defaultBlockTag: 'div',\n\n  entityStyleFn: entity => {\n    const entityType = entity.get('type').toLowerCase();\n    if (entityType === 'video') {\n      const { src } = entity.getData();\n      return {\n        element: 'video',\n        attributes: {\n          src: src,\n        },\n      };\n    }\n  },\n});\n\nfunction getClassesAndStyles({ block, blockStyles = OrderedSet(), classes = OrderedSet() }) {\n  const data = block.getData();\n  data\n    .filter((v, k) => !['depth', 'listStyles', 'listStart'].includes(k))\n    .forEach((v, k) => {\n      if (v === 'class') {\n        classes = classes.add(k);\n      } else {\n        blockStyles = blockStyles.add(`${k}: ${v}`);\n      }\n    });\n  const margin = block.get('depth');\n  if (margin) {\n    blockStyles = OrderedSet.of([`margin-left: ${margin * 2.5}em`]).union(blockStyles);\n  }\n  // convert classes & styles to strings and return\n  classes = (classes.size && ` class=\"${classes.toArray().join(' ')}\"`) || '';\n  blockStyles = (blockStyles.size && ` style=\"${blockStyles.toArray().join('; ')}\"`) || '';\n  return `${classes}${blockStyles}`;\n}\n\nfunction buildHtmlForBlockText(result, block, contentState) {\n  if (!block) {\n    return '<span>&nbsp;</span>';\n  }\n  // now build the html for all inline styles for each \"styleRange\" in the block. A styleRange is\n  // any sequence in the block where the characters share the same inline styling.\n  block.findStyleRanges(\n    () => true,\n    (s, e) => {\n      let close = '';\n      let styles = block.getInlineStyleAt(s);\n      styles = Map(customStyleFn(styles))\n        .reduce((styleSet, v, k) => {\n          k = kebabCase(k);\n          if (k === 'font-size' && /^\\d*$/.test(v)) v += 'pt';\n          return styleSet.add(`${k}: ${v}`);\n        }, OrderedSet())\n        .toArray()\n        .join('; ');\n\n      styles = styles ? ` style=\"${styles}\"` : '';\n      // If a styleRange overlaps with an \"entity\" that starts and ends at the same points in the block\n      // the entity represents an embeded link\n      const startKey = block.getEntityAt(s);\n      const endKey = block.getEntityAt(e - 1);\n      const entity = startKey && startKey === endKey ? contentState.getEntity(startKey) : null;\n\n      if (styles) {\n        result += `<span${styles}>`;\n        close = '</span>' + close;\n      }\n      // Now add the text content of the block for the current styleRange. If a \"link\" entity exists for this range\n      // then wrap the text content in an anchor tag and add the href.\n      // The multiple \"replace\" calls prevent empty paragraphs and extra spaces from collapsing and failing to render.\n      const textContent = block\n        .getText()\n        .slice(s, e)\n        .replace(/\\n/g, '<br/>')\n        .replace(/\\s{2,}?/g, '&nbsp;&nbsp;')\n        .replace(/^\\s$/g, '&nbsp;');\n      if (entity && entity.get('type') === 'LINK') {\n        const { url, target } = entity.getData();\n        result += `<a href=\"${url}\" ${target ? `target=\"${target}\" rel=\"noreferrer\"` : ''}>${textContent}</a>`;\n      } else {\n        result += textContent;\n      }\n      result += close;\n    }\n  );\n  return result;\n}\n","import React, { useContext, useEffect, useRef, useState } from \"react\"\nimport { ModalCtx } from \"../App\"\nimport { stateToHTML } from \"draft-js-export-html\"\nimport { getStateToHtmlOptions } from \"./renderConfig\"\nimport parser from \"html-react-parser\"\n\nexport default function RenderTable(props) {\n\tconst [initialCellWidth, setInitialCellWidt] = useState(200)\n\tconst wrapperRef = useRef(null)\n\tconst editor = props.blockProps.getEditorRef()\n\tconst editorState = props.blockProps.getEditorState()\n\tconst { onChange } = props.blockProps.getProps()\n\tconst { block } = props\n\tconst data = block.getData()\n\tconst tableKey = data.get(\"tableKey\")\n\tconst defaultSchema = data.get(\"defaultSchema\")\n\tconst tableSchema = data.get(\"tableSchema\")\n\tconst row = data.get(\"row\")\n\tconst cell = data.get(\"cell\")\n\tconst col = data.get(\"col\")\n\tconst aligment = data.get(\"aligment\")\n\tconst colStyle = data.get(\"colStyle\")\n\n\tconst schema = tableSchema || defaultSchema\n\n\tconst modalCtx = useContext(ModalCtx)\n\n\tfunction handleModalChange() {\n\t\tmodalCtx.handleModal((s) => ({\n\t\t\t...s,\n\t\t\tisOpen: !s.isOpen,\n\t\t\tgeneralEditorState: editorState,\n\t\t\tdefaultSchema,\n\t\t\ttableSchema,\n\t\t\ttableKey,\n\t\t\tonChange,\n\t\t\trow,\n\t\t\tcell,\n\t\t\tcol,\n\t\t\taligment,\n\t\t\tcolStyle,\n\t\t}))\n\t}\n\n\tconst syncContenteditable = (disabled) => {\n\t\tif (disabled) {\n\t\t\tconst editableDivs =\n\t\t\t\teditor.current?.editor.querySelectorAll('[contenteditable=\"true\"]') ??\n\t\t\t\t[]\n\t\t\teditableDivs.forEach((div) => {\n\t\t\t\tdiv.setAttribute(\"contenteditable\", \"false\")\n\t\t\t\tdiv.setAttribute(\"data-editable-disabled\", \"true\")\n\t\t\t})\n\t\t} else if (!disabled) {\n\t\t\tconst editableDivs =\n\t\t\t\teditor.current?.editor.querySelectorAll(\n\t\t\t\t\t'[data-editable-disabled=\"true\"]'\n\t\t\t\t) ?? []\n\t\t\teditableDivs.forEach((div) => {\n\t\t\t\tdiv.setAttribute(\"contenteditable\", \"true\")\n\t\t\t\tdiv.removeAttribute(\"data-editable-disabled\")\n\t\t\t})\n\t\t}\n\t}\n\tuseEffect(() => {\n\t\tsyncContenteditable(props.disabled)\n\t}, [props.disabled])\n\n\tuseEffect(() => {\n\t\tif (wrapperRef.current && schema[0]?.length) {\n\t\t\tsetInitialCellWidt(wrapperRef?.current.clientWidth /  schema[0]?.length)\n\t\t}\n\t}, [wrapperRef, schema])\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"wrapper\" ref={wrapperRef}>\n\t\t\t\t<table\n\t\t\t\t\tkey={tableKey}\n\t\t\t\t\tid={tableKey}\n\t\t\t\t\tborder={1}\n\t\t\t\t\tclassName=\"RenderTableWrapper\"\n\t\t\t\t>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{schema.map((row, i) => (\n\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t{row.map((cell, j) => {\n\t\t\t\t\t\t\t\t\tconst width = colStyle && colStyle[cell.colKey]?.width\n\t\t\t\t\t\t\t\t\tif (!cell.contentState) {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\tkey={j}\n\t\t\t\t\t\t\t\t\t\t\t\tdata-position={`${tableKey}-${i}-${j}`}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: initialCellWidth }}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"content\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ minHeight: \"16px\" }}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst options = getStateToHtmlOptions(cell.contentState)\n\t\t\t\t\t\t\t\t\tconst content = stateToHTML(cell.contentState, options)\n\t\t\t\t\t\t\t\t\tconst aligment = cell?.aligment || \"center\"\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tkey={cell.cellKey}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ width, textAlign: aligment }}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"content\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border border_top\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border border_left\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border border_right\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"border border_bottom\" />\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"content\" style={{ minHeight: \"16px\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t{parser(content.replace(/\\n/g, \"\"))}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<button className=\"button__edit\" onClick={handleModalChange}>\n\t\t\t\t\tEdit\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</>\n\t)\n}\n\nRenderTable.defaultProps = {\n\tdisabled: false,\n}\n","import React from \"react\"\nimport {\n\tEditorState,\n\tKeyBindingUtil,\n\tModifier,\n\tRichUtils,\n\tgetDefaultKeyBinding,\n} from \"draft-js\"\nimport { unionWith } from \"lodash\"\nimport { OrderedSet } from \"immutable\"\nimport { Keys,  MAX_LIST_DEPTH } from \"../lib/constants\"\nimport { handleTabInTable } from \"./utils\"\nimport CreateTableComponent from \"../lib/Table\"\nimport RenderTable from \"../lib/RenderTable\"\n\nexport default () => {\n\treturn {\n\t\tblockRendererFn: (block, props) => {\n\t\t\tif (block?.getData()?.get(\"dataType\") === \"table-create\") {\n\t\t\t\treturn {\n\t\t\t\t\tcomponent: CreateTableComponent,\n\t\t\t\t\tprops: { ...props, block },\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (block?.getData()?.get(\"dataType\") === \"table-cel\") {\n\t\t\t\treturn {\n\t\t\t\t\tcomponent: RenderTable,\n\t\t\t\t\tprops: { ...props, block },\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tkeyBindingFn: (e, props) => {\n\t\t\tconst editorState = props.getEditorState()\n\t\t\tconst { onChange } = props.getProps()\n\t\t\tconst { hasCommandModifier } = KeyBindingUtil\n\t\t\tif (\n\t\t\t\t!editorState.getCurrentContent().hasText() &&\n\t\t\t\t[\"unstyled\", \"paragraph\"].includes(\n\t\t\t\t\teditorState.getCurrentContent().getFirstBlock().getType()\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t;(async () => {\n\t\t\t\t\tconst currentStyle = editorState.getCurrentInlineStyle().toArray()\n\t\t\t\t\t// merge user selected styles with defaults, overriding defaults where they conflict\n\t\t\t\t\tconst styles = unionWith(\n\t\t\t\t\t\tcurrentStyle,\n\t\t\t\t\t\tprops.defaultStyles,\n\t\t\t\t\t\t(v1, v2) => v1.split(\".\")[0] === v2.split(\".\")[0]\n\t\t\t\t\t)\n\t\t\t\t\tawait onChange(\n\t\t\t\t\t\tEditorState.setInlineStyleOverride(editorState, OrderedSet(styles))\n\t\t\t\t\t)\n\t\t\t\t})()\n\t\t\t}\n\t\t\tif (e.keyCode === Keys.B && e.shiftKey && hasCommandModifier(e)) {\n\t\t\t\treturn \"bullet_list\"\n\t\t\t} else if (e.keyCode === Keys.B && hasCommandModifier(e)) {\n\t\t\t\treturn \"BOLD\"\n\t\t\t} else if (e.keyCode === Keys.L && e.shiftKey && hasCommandModifier(e)) {\n\t\t\t\treturn \"ordered_list\"\n\t\t\t} else if (e.keyCode === Keys.L && hasCommandModifier(e)) {\n\t\t\t\treturn \"float_left\"\n\t\t\t} else if (e.keyCode === Keys.R && hasCommandModifier(e)) {\n\t\t\t\treturn \"float_right\"\n\t\t\t} else if (e.keyCode === Keys.I && hasCommandModifier(e)) {\n\t\t\t\treturn \"ITALIC\"\n\t\t\t} else if (e.keyCode === Keys[\"]\"] && hasCommandModifier(e)) {\n\t\t\t\treturn \"INDENT\"\n\t\t\t} else if (e.keyCode === Keys.U && hasCommandModifier(e)) {\n\t\t\t\treturn \"UNDERLINE\"\n\t\t\t} else if (e.keyCode === Keys[\"[\"] && hasCommandModifier(e)) {\n\t\t\t\treturn \"OUTDENT\"\n\t\t\t} else if (\n\t\t\t\te.keyCode === Keys.Backspace &&\n\t\t\t\t!hasCommandModifier(e) &&\n\t\t\t\t!e.altKey\n\t\t\t) {\n\t\t\t\treturn \"backspace\"\n\t\t\t\t// Tab & shift+Tab handled here instead of handleKeyCommand because RichUtils.onTab requires event reference\n\t\t\t} else if (e.keyCode === Keys.Delete) {\n\t\t\t\treturn \"delete\"\n\t\t\t} else if (e.keyCode === Keys.Tab && e.shiftKey) {\n\t\t\t\tconst currentBlockType = RichUtils.getCurrentBlockType(editorState)\n\t\t\t\tif (currentBlockType.includes(\"list-item\")) {\n\t\t\t\t\tonChange(RichUtils.onTab(e, editorState, MAX_LIST_DEPTH))\n\t\t\t\t} else if (currentBlockType === \"table\") {\n\t\t\t\t\thandleTabInTable(\"previous\", false, editorState, onChange)\n\t\t\t\t}\n\t\t\t\treturn \"shiftTab\"\n\t\t\t} else if (e.keyCode === Keys.Tab) {\n\t\t\t\tconst currentBlockType = RichUtils.getCurrentBlockType(editorState)\n\t\t\t\tif (RichUtils.getCurrentBlockType(editorState).includes(\"list-item\")) {\n\t\t\t\t\tonChange(RichUtils.onTab(e, editorState, MAX_LIST_DEPTH))\n\t\t\t\t} else if (currentBlockType === \"table\") {\n\t\t\t\t\thandleTabInTable(\"next\", false, editorState, onChange)\n\t\t\t\t} else {\n\t\t\t\t\tconst newContentState = Modifier.replaceText(\n\t\t\t\t\t\teditorState.getCurrentContent(),\n\t\t\t\t\t\teditorState.getSelection(),\n\t\t\t\t\t\t\"     \"\n\t\t\t\t\t)\n\t\t\t\t\tonChange(\n\t\t\t\t\t\tEditorState.push(editorState, newContentState, \"insert-characters\")\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\treturn \"tab\"\n\t\t\t}\n\t\t\treturn getDefaultKeyBinding(e)\n\t\t},\n\t}\n}\n","import React, { useState } from 'react';\n\nconst rows = Array(8).fill(1);\nconst grid = Array(8).fill([...rows]);\n\nconst TableGrid = props => {\n  const [size, setSize] = useState({ cols: 0, rows: 0 });\n\n  const handleHover = (i, j) => {\n    setSize({ cols: j + 1, rows: i + 1 });\n  };\n\n  const handleSelect = () => {\n    props.handleSubmit(size);\n  };\n\n  const grayCell = {\n    border: '1px solid rgba(150, 150, 150, 1)',\n    background: 'rgba(200, 200, 200, 0.4)',\n  };\n\n  const blueCell = {\n    border: '1px solid rgba(0, 125, 250, 0.8)',\n    background: 'rgba(0, 125, 250, 0.4)',\n  };\n  return (\n    <div>\n      <div style={{ margin: '10px 10px 5px' }}>\n        {grid.map((row, i) => (\n          <div\n            key={i}\n            style={{ display: 'flex', width: 136, justifyContent: 'space-between', padding: 1, cursor: 'pointer' }}\n          >\n            {row.map((cell, j) => {\n              const isSelected = i <= size.rows - 1 && j <= size.cols - 1;\n\n              const style = isSelected?blueCell:grayCell\n              return (\n                <div\n                  key={`${i}-${j}`}\n                  style={{ flex: '0 0 15px', height: 15, ...style }}\n                  onMouseEnter={() => handleHover(i, j)}\n                  onClick={handleSelect}\n                ></div>\n              );\n            })}\n          </div>\n        ))}\n      </div>\n      <div css={{ margin: 10, fontSize: 12 }}>\n        Insert table size: {size.cols} x {size.rows}\n      </div>\n    </div>\n  );\n};\n\nexport default TableGrid;\n","import TableGrid from \"./toolbar/tableGrid\"\nimport Dropdown from \"./toolbar/richEditorDropdown\"\nimport {\n\tgenKey,\n\tContentBlock,\n\tModifier,\n\tSelectionState,\n\tEditorState,\n\tContentState,\n} from \"draft-js\"\nimport { Map } from \"immutable\"\n\nexport default (props) => {\n\tconst state = props.getEditorState()\n\tconst onSelected = (size) => {\n\t\tconst { cols, rows } = size\n\n\t\tlet selection = state.getSelection()\n\t\tif (!selection.isCollapsed()) {\n\t\t\treturn null\n\t\t}\n\n\t\t// don't insert a table within a table\n\t\tif (\n\t\t\tstate\n\t\t\t\t.getCurrentContent()\n\t\t\t\t.getBlockForKey(selection.getAnchorKey())\n\t\t\t\t.getData()\n\t\t\t\t?.get(\"dataType\") === \"table-cell\"\n\t\t) {\n\t\t\treturn null\n\t\t}\n\t\tconst tableKey = genKey()\n\t\tconst data = Map({\n\t\t\ttableKey,\n\t\t\taligment: \"center\",\n\t\t\tcols,\n\t\t\trows,\n\t\t\tdataType: \"table-create\",\n\t\t})\n\t\tconst newBlock = new ContentBlock({\n\t\t\tkey: genKey(),\n\t\t\ttype: \"table\",\n\t\t\ttext: \" \",\n\t\t\tdata,\n\t\t})\n\t\tconst newBlocks = []\n\t\tnewBlocks.push(newBlock)\n\t\tconst selectionKey = selection.getAnchorKey()\n\t\tlet contentState = state.getCurrentContent()\n\t\tcontentState = Modifier.splitBlock(contentState, selection)\n\t\tconst blockArray = contentState.getBlocksAsArray()\n\t\tconst currBlock = contentState.getBlockForKey(selectionKey)\n\t\tconst index = blockArray.findIndex((block) => block === currBlock)\n\t\tconst isEnd = index === blockArray.length - 1\n\n\t\tif (blockArray[index]?.getData()?.get(\"dataType\") === \"table-create\") {\n\t\t\tnewBlocks.unshift(new ContentBlock({ key: genKey() }))\n\t\t}\n\t\tif (blockArray[index + 1]?.getData()?.get(\"dataType\") === \"table-create\") {\n\t\t\tnewBlocks.push(new ContentBlock({ key: genKey() }))\n\t\t}\n\t\tblockArray.splice(index + 1, 0, ...newBlocks)\n\t\tif (isEnd) {\n\t\t\tblockArray.push(new ContentBlock({ key: genKey() }))\n\t\t}\n\n\t\tconst entityMap = contentState.getEntityMap()\n\t\tcontentState = ContentState.createFromBlockArray(blockArray, entityMap)\n\t\tlet newEditorState = EditorState.push(\n\t\t\tstate,\n\t\t\tcontentState,\n\t\t\t\"insert-fragment\"\n\t\t)\n\t\tconst key = blockArray[0].getKey()\n\n\t\tselection = SelectionState.createEmpty(key)\n\t\tnewEditorState = EditorState.acceptSelection(newEditorState, selection)\n\t\tprops.onChange(newEditorState)\n\t}\n\treturn (\n\t\t<Dropdown\n\t\t\trender={(rest) => <TableGrid {...rest} />}\n\t\t\tcontrolWidth={40}\n\t\t\tdropdownWidth={160}\n\t\t\ticon={\"table-sld\"}\n\t\t\tmethod={\"tableDropdown\"}\n\t\t\tactiveOption={{ display: { icon: \"table-sld\" } }}\n\t\t\teditor={props.editor}\n\t\t\tonSelect={onSelected}\n\t\t\tkey={\"insertTable\"}\n\t\t/>\n\t)\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport iconLibrary from \"./lib/utils/iconLIbrary\"\nimport { config } from \"@fortawesome/fontawesome-svg-core\"\nimport \"@fortawesome/fontawesome-svg-core/styles.css\"\nimport \"./index.sass\"\nimport App from \"./App\"\nimport TablePlugin from \"./plugin/TablePlugin\"\nimport Button from \"./lib/components/Button\"\n\nconfig.autoAddCss = false // Tell Font Awesome to skip adding the CSS automatically since it's being imported above\niconLibrary()\n\nexport { App as Wrapper, Button, TablePlugin }\n"],"names":["iconLibrary","library","add","faAlignCenter","faAlignJustify","faAlignLeft","faAlignRight","faArrowDown","faArrowLeft","faArrowRight","faArrowUp","faBackward","faBars","faBan","faBold","faCheck","faCheckSquare","faChevronDown","faChevronRight","faChevronLeft","faChevronUp","faCloudUploadAlt","faCircle","faCode","faCog","faCompressAlt","faDollarSign","faDownload","faExclamationCircle","faExclamationTriangle","faExpandAlt","faEye","faEyeSlash","faFilter","faFlag","faFont","faForward","faImage","faIndent","faItalic","faLink","faListOl","faListUl","faLock","faLongArrowAltRight","faMapMarkerAlt","faOutdent","faPaintBrush","faParagraph","faPencilAlt","faPrint","faQuestion","faQuoteRight","faSearch","faSearchPlus","faSearchMinus","faSortUp","faSortDown","faSquare","faStepBackward","faStepForward","faStrikethrough","faSyncAlt","faTable","faTint","faTrashAlt","faUnderline","faUser","modalRoot","document","createElement","setAttribute","styles","body","appendChild","ModalContent","children","closingAnimate","className","isOpen","close","disabled","useModal","useEffect","handleKeyUp","e","which","preventDefault","window","addEventListener","removeEventListener","createPortal","_jsxs","root","_jsx","ClassNames","modal__overlay","modal__overlay_closed","modal__wrapper","modal__wrapper_closed","modal","proptypes","PropTypes","node","isRequired","bool","defaultprops","ModalContext","createContext","ModalHook","useContext","Modal","onClose","submit","setClosingAnimate","useState","useCallback","setTimeout","value","useMemo","Resizeble","colStyle","setColStyle","colWidth","colKey","start","setStart","ref","useRef","handleMouseDown","initDrag","doDrag","width","startWidth","clientX","startX","s","stopDrag","documentElement","console","log","_Fragment","Cell","editorState","cellKey","onChange","index","active","setActive","styleKey","headerKey","selectGroup","clicking","enterHandler","aligment","setSelectGroup","cellStyle","eventState","event","activeGroup","includes","changeStyles","state","getSelectionInlineStyle","appliedStyles","Object","keys","filter","difference","x","concat","addStyleState","length","forEach","RichUtils","toggleInlineStyle","handleChange","toggleBlockType","handleFocus","current","editor","focus","handleBlur","handleMouseMove","classNames","textAlign","MAX_LIST_DEPTH","COLORS","FONTS","FONT_SIZES","defaultPreTagStyling","availableAlignments","type","display","icon","dropdownOptions","alignment","activeOption","find","a","controlWidth","dropdownWidth","list","method","Keys","B","Backspace","Delete","E","Enter","I","J","L","R","T","Tab","U","inlineStylesTypes","BLOCK_TYPES","label","style","HEADER_TYPES","Tooltip","props","anchorRef","observerRef","ResizeObserver","y","mouseRef","newAnchorRect","getBoundingClientRect","isMouseOverAnchor","left","right","top","bottom","shouldOpen","setShow","setAnchorBox","containerRef","overflow","setOverflow","show","anchorBox","propsAnchorRef","anchor","querySelector","offsetParent","parentNode","observer","observe","showFn","clientY","contains","target","handleWheel","disconnect","container","innerWidth","innerHeight","refBox","containerBox","test","orientation","leftOffset","rightOffset","topOffset","height","bottomOffset","tipPos","pointerInner","size","pointerOuter","position","opacity","visibility","transition","transitionProperty","maxWidth","componentDescription","componentKey","componentName","propTypes","oneOfType","object","string","number","oneOf","defaultProps","Button","block","danger","hasTooltipWhenDisabled","onClick","tooltip","tooltipOrientation","tooltipContainer","tooltipMaxWidth","tooltipSize","handleClick","stopPropagation","renderContent","tooltipProps","isNil","classes","Boolean","join","func","Icon","original","name","substring","indexOf","error","iconProps","border","color","testid","fixedWidth","flip","inverse","listItem","pulse","rotation","spin","title","transform","FontAwesomeIcon","DropdownWrapper","Dropdown","open","scrollDiff","setScrollDiff","scrollBottom","setScrollBottom","handleScrolling","scrollTop","clientHeight","scrollHeight","maxHeight","fontSize","paddingLeft","background","borderBottomRightRadius","borderBottomLeftRadius","DropdownBtn","dropdownOpen","dropdownOrientation","onButtonClick","useClickOutside","setOrientation","useLayoutEffect","isElement","getElementById","dimensions","buttonContent","otherProps","buttonProps","buttonDisabled","buttonSize","buttonType","RichEditorDropdown","React","Component","constructor","dropdownRef","createRef","showDropdown","componentDidMount","setState","componentDidUpdate","prevProps","handleButtonClick","handleSubmit","onSelect","renderBtnContent","render","dropdownProps","allowInput","onMouseDown","contentProps","result","shape","Content","map","item","Toolbar","setAligment","setGroupAligment","handleSelect","controlProps","key","initialCell","rowKey","EditorState","createEmpty","tolbarStyleButtons","charAt","dataStyle","initCellStyle","minWidth","blockTypes","createIndexes","arr","reduce","acc","c","i","ModalTable","closeModal","modalCtx","ModalCtx","row","setRow","col","setCol","cell","setCell","setStyleKey","setHeaderKey","groupAligment","defaultSchema","createState","rowArr","cellObject","colArr","r","genKey","push","j","tableSchema","renderSchema","colIndexMap","rowIndexMap","handleSave","getSchema","prepareSchema","contentState","getCurrentContent","generalEditorState","selection","getSelection","Modifier","splitBlock","blockArray","getBlocksAsArray","currBlock","getData","get","tableKey","findIndex","data","newData","set","newBlock","ContentBlock","text","splice","entityMap","getEntityMap","ContentState","createFromBlockArray","newEditorState","getKey","SelectionState","acceptSelection","group","handleToolbar","getAttribute","styleInArray","k","handleHeaderTypes","some","EditTableWrapper","setClicking","contextMenu","setContextMenu","colMap","rowMap","eventEnter","currentTarget","dataset","currentCell","curColIndex","startColIndex","startRowIndex","curRowIndex","correctCols","correctRows","rKey","cKey","button","handleMouseOver","handleContext","handleCol","needItems","newColKey","insertObject","curIndex","updateIndex","neededKey","selectedItems","tableWidth","clientWidth","cellWidth","resizeState","getPosition","posx","posy","pageX","pageY","scrollLeft","TableCtxMenu","changeMenu","setStyle","childrenArray","Children","toArray","w","cloneElement","initialModal","App","setModal","handleModal","handleEditor","Editor","handleTabInTable","direction","collapsed","targetKey","getAnchorKey","targetBlock","getBlockForKey","getBlockAfter","getBlockBefore","getType","merge","anchorOffset","getLength","focusOffset","getLastBlock","setBlockType","isTargetTable","endOffset","forceSelection","CreateTableComponent","createTable","blockProps","blocks","convertToRaw","dataType","getProps","createrBlock","rows","cols","Array","fill","newBlocks","dataMap","Map","prepareBlocks","newState","createEditorStateFromRaw","customStyleMap","styleMap","DefaultDraftInlineStyle","font","fontFamily","customStyleFn","defaultStyles","intersect","v","subtract","groupedStyles","convertStyleStringToObject","mapKeys","camelCase","split","every","vv","shift","trim","val","toJS","isEmpty","getStateToHtmlOptions","inlineStyles","BOLD","fontWeight","ITALIC","fontStyle","UNDERLINE","textDecoration","STRIKETHROUGH","inlineStyleFn","element","blockRenderers","blockStyles","OrderedSet","getClassesAndStyles","buildHtmlForBlockText","paragraph","unstyled","atomic","figStyle","imgStyle","kk","float","src","getEntityAt","getEntity","prevBlock","listStyles","listItems","getBlockMap","skipUntil","takeWhile","endsWith","toList","listTag","currentDepth","getDepth","depth","openTag","table","tableShape","tableStyle","tableBlocks","colgroup","cellCounter","rowStyle","tag","cellBlock","colspan","rowspan","rowNum","colNum","defaultBlockTag","entityStyleFn","entity","entityType","toLowerCase","attributes","margin","of","union","findStyleRanges","getInlineStyleAt","styleSet","kebabCase","startKey","endKey","textContent","getText","slice","replace","url","RenderTable","initialCellWidth","setInitialCellWidt","wrapperRef","getEditorRef","getEditorState","schema","handleModalChange","syncContenteditable","editableDivs","querySelectorAll","div","removeAttribute","minHeight","options","content","stateToHTML","parser","blockRendererFn","component","keyBindingFn","hasCommandModifier","KeyBindingUtil","hasText","getFirstBlock","currentStyle","getCurrentInlineStyle","unionWith","v1","v2","setInlineStyleOverride","keyCode","shiftKey","altKey","currentBlockType","getCurrentBlockType","onTab","newContentState","replaceText","getDefaultKeyBinding","grid","TableGrid","setSize","handleHover","grayCell","blueCell","justifyContent","padding","cursor","isSelected","flex","onSelected","isCollapsed","selectionKey","isEnd","unshift","rest","config","autoAddCss"],"mappings":"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"}